"use strict";(self.webpackChunkultima_ng=self.webpackChunkultima_ng||[]).push([[757],{4757:(P,y,i)=>{i.r(y),i.d(y,{VoyageurAttenteComponent:()=>ye});var d=i(5861),a=i(6814),e=i(9212),h=i(95),_=i(5219),x=i(707),u=i(3714),A=i(4480),g=i(9232),I=i(4104),O=i(6340),p=i(3965),C=i(1712),m=i(7213),v=i(3259),Z=i(3506),w=i(8645),M=i(9773),F=i(4221),B=i(2173),N=i(3855),k=i(1363),J=i(2992),K=i(6821),G=i(2793),V=i(7791),S=i(6263),j=i(7995),Q=i(1676),q=i(5961),r=i(5261),E=i(4055),c=i(3904),D=i(7962);const f=["videoElement"],U=["canvasElement"];function L(s,T){if(1&s&&(e.TgZ(0,"small",108),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.AsE(" P\xe9riode: ",e.xi3(2,2,t.dateDebut,"dd/MM/yyyy")," - ",e.xi3(3,5,t.dateFin,"dd/MM/yyyy")," ")}}function H(s,T){if(1&s){const t=e.EpF();e.TgZ(0,"div",98)(1,"div",99)(2,"p-button",100),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openFilterDialog())}),e.qZA(),e.TgZ(3,"p-button",101),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(3);return n.resetFilters(),e.KtG(l.clear())}),e.qZA()(),e.TgZ(4,"div",102)(5,"span",103),e._UZ(6,"i",104),e.TgZ(7,"input",105,106),e.NdJ("input",function(n){e.CHM(t);const l=e.oxw(),b=e.MAs(3);return e.KtG(l.onGlobalFilter(b,n))}),e.qZA()(),e.YNc(9,L,4,8,"small",107),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.dateDebut&&t.dateFin)}}function Y(s,T){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"th",109)(2,"div",110),e._uU(3," Passager "),e._UZ(4,"p-sortIcon",111),e.qZA()(),e.TgZ(5,"th",112)(6,"div",110),e._uU(7," Document "),e._UZ(8,"p-sortIcon",113),e.qZA()(),e.TgZ(9,"th",114)(10,"div",110),e._uU(11," Nationalit\xe9 "),e._UZ(12,"p-sortIcon",115),e.qZA()(),e.TgZ(13,"th"),e._uU(14,"Itin\xe9raire"),e.qZA(),e.TgZ(15,"th",116)(16,"div",110),e._uU(17," Voyage "),e._UZ(18,"p-sortIcon",117),e.qZA()(),e.TgZ(19,"th",118)(20,"div",110),e._uU(21," Statut "),e._UZ(22,"p-sortIcon",119),e.qZA()(),e.TgZ(23,"th",120),e._uU(24,"Actions"),e.qZA()(),e.TgZ(25,"tr")(26,"th")(27,"span",121),e._UZ(28,"i",104),e.TgZ(29,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"nomFamille","contains"))}),e.qZA()()(),e.TgZ(30,"th")(31,"span",121),e._UZ(32,"i",104),e.TgZ(33,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"typeDocument","contains"))}),e.qZA()()(),e.TgZ(34,"th")(35,"span",121),e._UZ(36,"i",104),e.TgZ(37,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"nationalite","contains"))}),e.qZA()()(),e.TgZ(38,"th")(39,"span",121),e._UZ(40,"i",104),e.TgZ(41,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"aeroportDepart","contains"))}),e.qZA()()(),e.TgZ(42,"th")(43,"span",121),e._UZ(44,"i",104),e.TgZ(45,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"dateVoyage","contains"))}),e.qZA()()(),e.TgZ(46,"th")(47,"span",121),e._UZ(48,"i",104),e.TgZ(49,"input",105),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(3);return e.KtG(l.filter(n.target.value,"statut","contains"))}),e.qZA()()(),e._UZ(50,"th"),e.qZA()}}function z(s,T){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",122),e._uU(3),e.qZA(),e.TgZ(4,"div",123),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div",123),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"div",110)(15,"span"),e._uU(16),e.qZA(),e._UZ(17,"i",124),e.TgZ(18,"span"),e._uU(19),e.qZA()()(),e.TgZ(20,"td")(21,"div"),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"div",123),e._uU(25),e.qZA()(),e.TgZ(26,"td"),e._UZ(27,"p-tag",125),e.qZA(),e.TgZ(28,"td",120)(29,"p-button",126),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveEnregistrementValid())}),e.qZA(),e.TgZ(30,"p-button",127),e.NdJ("onClick",function(){const l=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.selectEnregistrement(l))}),e.qZA()()()}if(2&s){const t=T.$implicit,o=e.oxw();e.xp6(3),e.AsE(" ",t.nomFamille," ",t.prenom," "),e.xp6(2),e.hij(" ",t.nbreVoyage," vol(s) "),e.xp6(3),e.Oqu(t.typeDocument),e.xp6(2),e.hij(" ",t.numeroDocument," "),e.xp6(2),e.hij(" ",t.nationalite||"N/A"," "),e.xp6(4),e.Oqu(t.aeroportDepart),e.xp6(3),e.Oqu(t.aeroportDestination),e.xp6(3),e.hij(" ",e.xi3(23,16,t.dateVoyage,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",t.heureVoyage||"N/A"," "),e.xp6(2),e.Q6J("value",t.statut||"N/A")("severity",o.getStatutSeverity(t.statut)),e.xp6(2),e.Q6J("rounded",!0)("text",!0),e.xp6(1),e.Q6J("rounded",!0)("text",!0)}}function $(s,T){1&s&&(e.TgZ(0,"tr")(1,"td",128)(2,"div",129),e._UZ(3,"i",130),e.TgZ(4,"span",131),e._uU(5,"Aucun enregistrement trouv\xe9 !"),e.qZA(),e.TgZ(6,"span",132),e._uU(7,"Essayez de modifier vos crit\xe8res de recherche"),e.qZA()()()())}function X(s,T){1&s&&(e.TgZ(0,"tr")(1,"td",133)(2,"div",134),e._UZ(3,"i",135),e.TgZ(4,"span"),e._uU(5,"Chargement des donn\xe9es..."),e.qZA()()()())}function ee(s,T){if(1&s&&(e.TgZ(0,"div",83),e._UZ(1,"i",145),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&s){const t=T.$implicit;e.xp6(3),e.AsE("",t.nomAeroport," - ",t.code_oaci,"")}}const te=()=>({width:"100%"});function ne(s,T){if(1&s&&(e.TgZ(0,"form",13)(1,"div",0)(2,"div",136)(3,"label",137),e._uU(4," Date de d\xe9but "),e.qZA(),e._UZ(5,"p-calendar",138),e.qZA(),e.TgZ(6,"div",136)(7,"label",139),e._uU(8," Date de fin "),e.qZA(),e._UZ(9,"p-calendar",140),e.qZA(),e.TgZ(10,"div",136)(11,"label",141),e._uU(12," A\xe9roport "),e._UZ(13,"span",142),e.qZA(),e.TgZ(14,"p-dropdown",143),e.YNc(15,ee,4,2,"ng-template",144),e.qZA()()()()),2&s){const t=e.oxw();let o,n,l;e.Q6J("formGroup",t.filterFormGroup),e.xp6(5),e.Q6J("showIcon",!0)("maxDate",null==(o=t.filterFormGroup.get("dateFin"))?null:o.value),e.xp6(4),e.Q6J("showIcon",!0)("minDate",null==(n=t.filterFormGroup.get("dateDebut"))?null:n.value),e.xp6(5),e.Akn(e.DdM(12,te)),e.ekj("ng-invalid",(null==(l=t.filterFormGroup.get("aeroport"))?null:l.invalid)&&(null==(l=t.filterFormGroup.get("aeroport"))?null:l.touched)),e.Q6J("options",t.aeroports)("showClear",!0)("filter",!0)}}function oe(s,T){if(1&s){const t=e.EpF();e.TgZ(0,"div",146)(1,"button",147),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeFilterDialog())}),e.qZA(),e.TgZ(2,"button",148),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetFilters())}),e.qZA(),e.TgZ(3,"button",149),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.applyFilters())}),e.qZA()()}}function ie(s,T){if(1&s){const t=e.EpF();e.TgZ(0,"div",146)(1,"button",150),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeEditModal())}),e.qZA(),e.TgZ(2,"button",151),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveEnregistrement())}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.editFormGroup.invalid)}}function ae(s,T){if(1&s&&(e.TgZ(0,"div",152),e._UZ(1,"img",153),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.empreinteGauche().image,e.LSH)}}function re(s,T){1&s&&(e.TgZ(0,"div",154),e._UZ(1,"i",155),e.qZA())}function le(s,T){if(1&s&&(e.TgZ(0,"div",152),e._UZ(1,"img",156),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.empreinteDroite().image,e.LSH)}}function se(s,T){1&s&&(e.TgZ(0,"div",154),e._UZ(1,"i",155),e.qZA())}function pe(s,T){if(1&s&&(e.TgZ(0,"div",152),e._UZ(1,"img",157),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.empreintePouces().image,e.LSH)}}function ce(s,T){1&s&&(e.TgZ(0,"div",154),e._UZ(1,"i",155),e.qZA())}function de(s,T){1&s&&(e.TgZ(0,"div",158),e._UZ(1,"img",159),e.qZA()),2&s&&(e.xp6(1),e.Q6J("src",T,e.LSH))}function ue(s,T){1&s&&(e.TgZ(0,"div",154),e._UZ(1,"i",160),e.qZA())}const me=()=>[5,10,20,30],_e=()=>["nomFamille","prenom","numeroDocument","nationalite","aeroportDepart","aeroportDestination"],ge=()=>({width:"500px"}),fe=()=>({width:"1000px"}),he=()=>({width:"60rem"}),Te=()=>({"960px":"75vw","640px":"95vw"}),ve=()=>({marginTop:"80px"});let ye=(()=>{class s{constructor(t,o,n,l,b){this.fb=t,this.store=o,this.router=n,this.confirmationService=l,this.messageService=b,this.destroy$=new w.x,this.enregistrementList=(0,e.tdS)([]),this.newEnregistrement={},this.selectedEnregistrement={},this.cols=[],this.keyword="",this.totalItems=0,this.itemsPerPage=10,this.page=0,this.first=0,this.rows=10,this.filterDialog=!1,this.loading=(0,e.tdS)(!0),this.aeroports=[],this.motifVoyages=[],this.aeroportSelected=null,this.motifVoyageSelected=null,this.isEditModalOpen=!1,this.isCaptureBiometriqueModalOpen=!1,this.empreinteGauche=(0,e.tdS)({image:null,capturee:!1}),this.empreinteDroite=(0,e.tdS)({image:null,capturee:!1}),this.empreintePouces=(0,e.tdS)({image:null,capturee:!1}),this.capturedPhotoPourBiometrie=(0,e.tdS)(null),this.biometric=(0,e.tdS)(null),this.isCameraModalOpen=(0,e.tdS)(!1),this.isSaving=(0,e.tdS)(!1),this.capturedPhotoBase64=(0,e.tdS)(null),this.currentCameraTarget=(0,e.tdS)(null),this.dateDebut=null,this.dateFin=null,this.isDetailModalOpen=!1,this.selectedStatuts=[],this.typesDocument=[{label:"Passeport",value:"PASSEPORT"},{label:"CNI",value:"CNI"}],this.formData=(0,e.tdS)({typeDocument:G.u4.PASSEPORT}),this.mediaStream=null,this.statutsVol=[{label:"Valid\xe9",value:r.F.VALIDE},{label:"En_attente",value:r.F.EN_ATTENTE},{label:"Annul\xe9",value:r.F.ANNULE},{label:"Rejet\xe9",value:r.F.REJETE}]}ngOnInit(){this.cols=[{field:"nomFamille",header:"Nom"},{field:"prenom",header:"Pr\xe9nom"},{field:"typeDocument",header:"Type document"},{field:"numeroDocument",header:"N\xb0 document"},{field:"nationalite",header:"Nationalit\xe9"},{field:"villeDepart",header:"Ville d\xe9part"},{field:"villeDestination",header:"Destination"},{field:"dateVoyage",header:"Date voyage"},{field:"motifVoyage",header:"Motif"}],this.createFormSearch(),this.createFormFilter(),this.createEditForm(),this.dateDebut=new Date,this.dateDebut.setDate(this.dateDebut.getDate()-7),this.dateFin=new Date,this.loadEnregistrements(),this.subscribeToStoreUpdates(),this.aeroportList$=this.store.pipe((0,F.Ys)(Q.B)),this.store.dispatch(j.gM()),this.aeroportList$.pipe((0,M.R)(this.destroy$)).subscribe(t=>{t&&(this.aeroports=[...t],console.log("=== A\xe9roports assign\xe9s ===",this.aeroports))}),this.store.dispatch(k.vt()),this.store.pipe((0,F.Ys)(J.O)).pipe((0,M.R)(this.destroy$)).subscribe(t=>{t&&(this.motifVoyages=t||[])})}getStatutSeverity(t){switch(t){case"VALIDE":return"success";case"EN_ATTENTE":return"warning";case"REFUSE":return"danger";default:return"secondary"}}loadEnregistrements(){if(!this.dateDebut||!this.dateFin)return void this.messageService.add({severity:"warn",summary:"Attention",detail:"Veuillez s\xe9lectionner une p\xe9riode",life:3e3});if(this.dateDebut>this.dateFin)return void this.messageService.add({severity:"error",summary:"Erreur",detail:"La date de d\xe9but doit \xeatre avant la date de fin",life:3e3});this.loading.set(!0);const t={dateDebut:this.dateDebut,dateFin:this.dateFin,aeroportId:this.aeroportSelected?this.aeroportSelected.id:0,status:this.selectedStatuts.length>0?this.selectedStatuts:void 0,page:this.page,size:this.rows,sortBy:"dateVoyage,desc"};console.log("=== SearchDto envoy\xe9 ===",t),this.store.dispatch(B.Ev({searchDto:t}))}subscribeToStoreUpdates(){this.store.pipe((0,F.Ys)(N.QE),(0,M.R)(this.destroy$)).subscribe(t=>{this.loading.set(!1),t&&this.enregistrementList.set(t)}),this.store.pipe((0,F.Ys)(N.w),(0,M.R)(this.destroy$)).subscribe(t=>{void 0!==t&&(this.totalItems=t)})}selectEnregistrement(t){this.store.dispatch(B.Bn({enregistrement:t})),this.openDetailModal(t)}selectEnregistrementValid(t){this.store.dispatch(B.Bn({enregistrement:t})),this.isDetailModalOpen=!0}openDetailModal(t){this.selectedEnregistrement=t;const o=t.dateDelivrance?new Date(t.dateDelivrance):null,n=t.dateNaissance?new Date(t.dateNaissance):null,l=t.dateVoyage?new Date(t.dateVoyage):null;this.editFormGroup.patchValue({typeDocument:t.typeDocument,numeroDocument:t.numeroDocument,numeroNip:t.numeroNip,dateDelivrance:o,lieuDelivrance:t.lieuDelivrance,nomFamille:t.nomFamille,prenom:t.prenom,dateNaissance:n,lieuNaissance:t.lieuNaissance,nationalite:t.nationalite,profession:t.profession,paysResidence:t.paysResidence,emailContact:t.emailContact,telephoneBurkina:t.telephoneBurkina,telephoneEtranger:t.telephoneEtranger,adresseBurkina:t.adresseBurkina,adresseEtranger:t.adresseEtranger,aeroportDepart:t.aeroportDepart,aeroportDestination:t.aeroportDestination,dateVoyage:l,heureVoyage:t.heureVoyage,dureeSejour:t.dureeSejour}),console.log("\u{1f4cb} Formulaire rempli avec:",this.editFormGroup.value),this.isDetailModalOpen=!0}closeDetailModal(){this.isDetailModalOpen=!1,this.selectedEnregistrement={}}closeFilterDialog(){this.filterDialog=!1}createFormSearch(){this.formSearch=this.fb.group({keyword:[null]})}createFormFilter(){this.aeroportSelected=null,this.filterFormGroup=this.fb.group({dateDebut:[this.dateDebut],dateFin:[this.dateFin],aeroport:[null],statutVoyages:[null]})}onPageChange(t){this.page=t.page,this.rows=t.rows,this.first=t.first,this.loadEnregistrements()}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}confirmDelete(t){this.confirmationService.confirm({message:`\xcates-vous s\xfbr de vouloir supprimer le voyageur "${t.nomFamille} ${t.prenom}" ?`,header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",acceptLabel:"Oui, supprimer",rejectLabel:"Annuler",accept:()=>{this.deleteVoyageurAttend(t)}})}deleteVoyageurAttend(t){this.store.dispatch(B.Ti({enregistrement:t,search:{dateDebut:this.dateDebut??new Date,dateFin:this.dateFin??new Date,aeroportId:this.aeroportSelected?this.aeroportSelected.id:0,status:this.selectedStatuts.length>0?this.selectedStatuts:void 0,page:this.page,size:this.rows,sortBy:"dateVoyage,desc"}}))}openFilterDialog(){this.filterFormGroup.patchValue({dateDebut:this.dateDebut,dateFin:this.dateFin,aeroport:this.aeroportSelected,statutVoyages:this.selectedStatuts}),this.filterDialog=!0}applyFilters(){const t=this.filterFormGroup.value;this.dateDebut=t.dateDebut,this.dateFin=t.dateFin,this.aeroportSelected=t.aeroport,this.selectedStatuts=t.statutVoyages,this.page=0,this.first=0,this.filterDialog=!1,this.loadEnregistrements()}resetFilters(){this.dateDebut=new Date,this.dateDebut.setDate(this.dateDebut.getDate()-7),this.dateFin=new Date,this.aeroportSelected=null,this.motifVoyageSelected=null,this.filterFormGroup.patchValue({dateDebut:this.dateDebut,dateFin:this.dateFin,aeroport:null,statutVoyages:[]}),this.page=0,this.first=0,this.loadEnregistrements()}cancelFilter(){this.filterDialog=!1}createEditForm(){this.editFormGroup=this.fb.group({typeDocument:[null],numeroDocument:[null],numeroNip:[null],dateDelivrance:[null],lieuDelivrance:[null],nomFamille:[null],prenom:[null],dateNaissance:[null],lieuNaissance:[null],nationalite:[null],profession:[null],paysResidence:[null],emailContact:[null],telephoneBurkina:[null],telephoneEtranger:[null],adresseBurkina:[null],adresseEtranger:[null],aeroportDepart:[null],aeroportDestination:[null],dateVoyage:[null],heureVoyage:[null],motifVoyage:[null],etatVoyage:[null],dureeSejour:[null],statut:[null]})}openEditModal(t){this.selectedEnregistrement=t,this.editFormGroup.patchValue({typeDocument:t.typeDocument,numeroDocument:t.numeroDocument,numeroNip:t.numeroNip,dateDelivrance:t.dateDelivrance?new Date(t.dateDelivrance):null,lieuDelivrance:t.lieuDelivrance,nomFamille:t.nomFamille,prenom:t.prenom,dateNaissance:t.dateNaissance?new Date(t.dateNaissance):null,lieuNaissance:t.lieuNaissance,nationalite:t.nationalite,profession:t.profession,paysResidence:t.paysResidence,emailContact:t.emailContact,telephoneBurkina:t.telephoneBurkina,telephoneEtranger:t.telephoneEtranger,adresseBurkina:t.adresseBurkina,adresseEtranger:t.adresseEtranger,aeroportDepart:t.aeroportDepart,aeroportDestination:t.aeroportDestination,dateVoyage:t.dateVoyage?new Date(t.dateVoyage):null,heureVoyage:t.heureVoyage,motifVoyage:t.motifVoyage,etatVoyage:t.etatVoyage,dureeSejour:t.dureeSejour}),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editFormGroup.reset(),this.selectedEnregistrement={}}saveEnregistrementValid(){this.isCaptureBiometriqueModalOpen=!0}saveEnregistrement(){if(this.editFormGroup.valid){const t={...this.editFormGroup.value,id:this.selectedEnregistrement?.id,dateDelivrance:this.editFormGroup.value.dateDelivrance?new Date(this.editFormGroup.value.dateDelivrance).toISOString():void 0,dateNaissance:this.editFormGroup.value.dateNaissance?new Date(this.editFormGroup.value.dateNaissance).toISOString():void 0,dateVoyage:this.editFormGroup.value.dateVoyage?new Date(this.editFormGroup.value.dateVoyage).toISOString():void 0,statut:r.F.VALIDE};console.log("----------Voir status et ID-------",t),this.store.dispatch(B.Zc(t)),this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Enregistrement mis \xe0 jour avec succ\xe8s",life:3e3}),this.newEnregistrement=t,this.closeEditModal(),this.isCaptureBiometriqueModalOpen=!0}else this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir tous les champs requis",life:3e3})}capturerEmpreinte(t){var o=this;return(0,d.Z)(function*(){o.currentCameraTarget.set(t),o.capturedPhotoBase64.set(null),o.isCameraModalOpen.set(!0);try{yield o.waitForView(),o.mediaStream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:1280,height:720}}),o.videoElement&&o.videoElement.nativeElement&&(o.videoElement.nativeElement.srcObject=o.mediaStream)}catch(n){console.error("Erreur d'acc\xe8s \xe0 la cam\xe9ra:",n),o.messageService.add({severity:"error",summary:"Erreur cam\xe9ra",detail:"Impossible d'acc\xe9der \xe0 la cam\xe9ra",life:3e3}),o.isCameraModalOpen.set(!1)}})()}demarrerCamera(t){var o=this;return(0,d.Z)(function*(){o.currentCameraTarget.set(t),o.capturedPhotoBase64.set(null),o.isCameraModalOpen.set(!0);try{yield o.waitForView(),o.mediaStream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:1280,height:720}}),o.videoElement&&o.videoElement.nativeElement&&(o.videoElement.nativeElement.srcObject=o.mediaStream)}catch(n){console.error("Erreur d'acc\xe8s \xe0 la cam\xe9ra:",n),o.messageService.add({severity:"error",summary:"Erreur cam\xe9ra",detail:"Impossible d'acc\xe9der \xe0 la cam\xe9ra",life:3e3}),o.isCameraModalOpen.set(!1)}})()}waitForView(){return new Promise(t=>setTimeout(t,100))}capturerPhoto(){if(!this.videoElement||!this.canvasElement)return;const t=this.videoElement.nativeElement,o=this.canvasElement.nativeElement,n=o.getContext("2d");if(!n)return;o.width=t.videoWidth,o.height=t.videoHeight,n.drawImage(t,0,0,o.width,o.height);const l=o.toDataURL("image/jpeg",.8);this.capturedPhotoBase64.set(l)}reprendrePhoto(){this.capturedPhotoBase64.set(null)}confirmerPhoto(){const t=this.capturedPhotoBase64(),o=this.currentCameraTarget();!t||!o||("biometrique"===o?this.capturedPhotoPourBiometrie.set(t):"empreinteGauche"===o?this.empreinteGauche.set({image:t,capturee:!0}):"empreinteDroite"===o?this.empreinteDroite.set({image:t,capturee:!0}):"empreintePouces"===o?this.empreintePouces.set({image:t,capturee:!0}):this.formData.update(n=>({...n,["recto"===o?"imageRecto":"verso"===o?"imageVerso":"photoProfil"]:t})),this.arreterCamera())}arreterCamera(){this.mediaStream&&(this.mediaStream.getTracks().forEach(t=>t.stop()),this.mediaStream=null),this.isCameraModalOpen.set(!1),this.capturedPhotoBase64.set(null),this.currentCameraTarget.set(null)}closeBiometricModal(){this.isCaptureBiometriqueModalOpen=!1,this.empreinteGauche.set({image:null,capturee:!1}),this.empreinteDroite.set({image:null,capturee:!1}),this.empreintePouces.set({image:null,capturee:!1}),this.capturedPhotoPourBiometrie.set(null)}validerAvecBiometrie(){if(!(this.empreinteGauche().capturee&&this.empreinteDroite().capturee&&this.empreintePouces().capturee&&this.capturedPhotoPourBiometrie()))return void this.messageService.add({severity:"warn",summary:"Donn\xe9es incompl\xe8tes",detail:"Veuillez capturer toutes les donn\xe9es biom\xe9triques",life:3e3});const t=this.convertBase64ToFile(this.empreinteGauche().image,"empreinte_gauche.jpg"),o=this.convertBase64ToFile(this.empreinteDroite().image,"empreinte_droite.jpg"),n=this.convertBase64ToFile(this.empreintePouces().image,"empreinte_pouces.jpg"),l=this.convertBase64ToFile(this.capturedPhotoPourBiometrie(),"photo_biometrique.jpg");if(!(t&&o&&n&&l))return void this.messageService.add({severity:"error",summary:"Erreur de conversion",detail:"Impossible de convertir les images captur\xe9es",life:3e3});this.biometric.set({informationPersonnelleId:this.newEnregistrement.informationPersonnelleId,empreinteGauche:t,empreinteDroite:o,empreintePouces:n,photoBiometrique:l});const b=this.biometric();b&&(this.store.dispatch(D.J0(b)),this.router.navigateByUrl("/admin/gestion-enregistrements")),this.closeBiometricModal()}convertBase64ToFile(t,o="photo.jpg"){if(t)try{const n=t.split(",")[1]||t,l=atob(n),b=new ArrayBuffer(l.length),W=new Uint8Array(b);for(let R=0;R<l.length;R++)W[R]=l.charCodeAt(R);const Ee=new Blob([W],{type:"image/jpeg"});return new File([Ee],o,{type:"image/jpeg"})}catch(n){return void console.error("Erreur conversion base64 vers File:",n)}}clearTableFilters(t){t.clear(),this.resetFilters()}resetHeaderFilters(t){t.clear()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(h.qu),e.Y36(F.yh),e.Y36(q.F0),e.Y36(_.YP),e.Y36(_.ez))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-voyageur-attente"]],viewQuery:function(o,n){if(1&o&&(e.Gf(f,5),e.Gf(U,5)),2&o){let l;e.iGM(l=e.CRH())&&(n.videoElement=l.first),e.iGM(l=e.CRH())&&(n.canvasElement=l.first)}},standalone:!0,features:[e._Bn([_.ez,_.YP]),e.jDz],decls:189,vars:71,consts:[[1,"grid"],[1,"col-12","md:col-12"],["styleClass","p-datatable-gridlines p-datatable-sm","currentPageReportTemplate","Affichage de {first} \xe0 {last} sur {totalRecords} entr\xe9es","selectionMode","single","dataKey","id",3,"value","columns","rows","paginator","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","selection","rowHover","loading","filterDelay","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Filtrer les enregistrements par p\xe9riode","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"p-fluid",3,"visible","header","modal","closable","draggable","visibleChange"],[3,"formGroup"],["legend","Informations Document","styleClass","mb-3",3,"toggleable"],[1,"field","col-12","md:col-6"],["for","typeDocument",1,"font-bold"],[1,"pi","pi-id-card","mr-2"],["id","typeDocument","formControlName","typeDocument","optionLabel","label","optionValue","value","placeholder","S\xe9lectionner un type",3,"options","showClear"],["for","numeroDocument",1,"font-bold"],[1,"pi","pi-hashtag","mr-2"],["pInputText","","id","numeroDocument","formControlName","numeroDocument"],["for","numeroNip",1,"font-bold"],[1,"pi","pi-key","mr-2"],["pInputText","","id","numeroNip","formControlName","numeroNip"],["for","dateDelivrance",1,"font-bold"],[1,"pi","pi-calendar","mr-2"],["id","dateDelivrance","formControlName","dateDelivrance","dateFormat","dd/mm/yy",3,"showIcon"],[1,"field","col-12"],["for","lieuDelivrance",1,"font-bold"],[1,"pi","pi-map-marker","mr-2"],["pInputText","","id","lieuDelivrance","formControlName","lieuDelivrance"],["legend","Informations Personnelles","styleClass","mb-3",3,"toggleable"],["for","nomFamille",1,"font-bold"],[1,"pi","pi-user","mr-2"],["pInputText","","id","nomFamille","formControlName","nomFamille"],["for","prenom",1,"font-bold"],["pInputText","","id","prenom","formControlName","prenom"],["for","dateNaissance",1,"font-bold"],["id","dateNaissance","formControlName","dateNaissance","dateFormat","dd/mm/yy",3,"showIcon"],["for","lieuNaissance",1,"font-bold"],["pInputText","","id","lieuNaissance","formControlName","lieuNaissance"],["for","nationalite",1,"font-bold"],[1,"pi","pi-flag","mr-2"],["pInputText","","id","nationalite","formControlName","nationalite"],["for","profession",1,"font-bold"],[1,"pi","pi-briefcase","mr-2"],["pInputText","","id","profession","formControlName","profession"],["legend","Coordonn\xe9es","styleClass","mb-3",3,"toggleable"],["for","paysResidence",1,"font-bold"],[1,"pi","pi-globe","mr-2"],["pInputText","","id","paysResidence","formControlName","paysResidence"],["for","emailContact",1,"font-bold"],[1,"pi","pi-envelope","mr-2"],["pInputText","","id","emailContact","type","email","formControlName","emailContact"],["for","telephoneBurkina",1,"font-bold"],[1,"pi","pi-phone","mr-2"],["pInputText","","id","telephoneBurkina","formControlName","telephoneBurkina"],["for","telephoneEtranger",1,"font-bold"],["pInputText","","id","telephoneEtranger","formControlName","telephoneEtranger"],["for","adresseBurkina",1,"font-bold"],[1,"pi","pi-home","mr-2"],["pInputText","","id","adresseBurkina","formControlName","adresseBurkina"],["for","adresseEtranger",1,"font-bold"],["pInputText","","id","adresseEtranger","formControlName","adresseEtranger"],["legend","Informations de Voyage","styleClass","mb-3",3,"toggleable"],["for","aeroportDepart",1,"font-bold"],[1,"pi","pi-arrow-up","mr-2"],["pInputText","","id","aeroportDepart","formControlName","aeroportDepart"],["for","aeroportDestination",1,"font-bold"],[1,"pi","pi-arrow-down","mr-2"],["pInputText","","id","aeroportDestination","formControlName","aeroportDestination"],["for","dateVoyage",1,"font-bold"],["id","dateVoyage","formControlName","dateVoyage","dateFormat","dd/mm/yy",3,"showIcon"],["for","heureVoyage",1,"font-bold"],[1,"pi","pi-clock","mr-2"],["pInputText","","id","heureVoyage","formControlName","heureVoyage","placeholder","HH:MM"],["for","dureeSejour",1,"font-bold"],[1,"pi","pi-hourglass","mr-2"],["pInputText","","id","dureeSejour","type","number","formControlName","dureeSejour"],["header","Capturer les Donn\xe9es Biom\xe9triques",3,"visible","modal","closable","breakpoints"],[1,"col-12","md:col-6","p-4","border-1","border-round","bg-gray-50"],[1,"flex","align-items-center","justify-content-between","mb-3"],[1,"flex","align-items-center"],[1,"pi","pi-fingerprint","text-4xl","text-cyan-500","mr-3"],[1,"font-semibold","text-gray-700"],[1,"text-xs"],["severity","info","size","small",3,"label","onClick"],["class","w-full h-12rem bg-white border-2 border-green-500 border-round overflow-hidden"],[1,"pi","pi-thumbs-up","text-4xl","text-purple-500","mr-3"],["severity","help","size","small",3,"label","onClick"],[1,"pi","pi-camera","text-4xl","text-green-500","mr-3"],["severity","success","size","small",3,"label","onClick"],["class","w-full h-12rem bg-white border-2 border-green-500 border-round overflow-hidden flex align-items-center justify-content-center"],[1,"flex","justify-content-end","gap-2","mt-4"],["label","Annuler","severity","secondary",3,"onClick"],["label","Sauvegarder et Valider","icon","pi pi-save",3,"loading","disabled","onClick"],["position","top-center"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],[1,"flex","gap-2"],["label","Filtrer par p\xe9riode","severity","info","icon","pi pi-filter",3,"onClick"],["label","R\xe9initialiser","severity","secondary","icon","pi pi-refresh",3,"onClick"],[1,"flex","flex-column","align-items-end"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher",1,"w-full",3,"input"],["filter",""],["class","text-500",4,"ngIf"],[1,"text-500"],["pSortableColumn","nomFamille"],[1,"flex","align-items-center","gap-2"],["field","nomFamille"],["pSortableColumn","typeDocument"],["field","typeDocument"],["pSortableColumn","nationalite"],["field","nationalite"],["pSortableColumn","dateVoyage"],["field","dateVoyage"],["pSortableColumn","statut"],["field","statut"],[1,"text-center"],[1,"p-input-icon-left","w-full"],[1,"font-semibold"],[1,"text-sm","text-color-secondary"],[1,"pi","pi-arrow-right","text-color-secondary"],[3,"value","severity"],["icon","pi pi-check","severity","prim","pTooltip","VALIDER","tooltipPosition","top",3,"rounded","text","click"],["icon","pi pi-eye","severity","info","pTooltip","Voir d\xe9tail","tooltipPosition","top",3,"rounded","text","onClick"],["colspan","7",1,"text-center","py-5"],[1,"flex","flex-column","align-items-center","justify-content-center","gap-3"],[1,"pi","pi-inbox","text-5xl","text-color-secondary"],[1,"text-xl","font-semibold","text-red-500"],[1,"text-color-secondary"],["colspan","7"],[1,"flex","align-items-center","justify-content-center","gap-2","py-3"],[1,"pi","pi-spin","pi-spinner","text-2xl"],[1,"col-12","md:col-6"],["for","dateDebut",1,"block","mb-2","font-semibold"],["id","dateDebut","formControlName","dateDebut","dateFormat","dd/mm/yy","placeholder","S\xe9lectionner une date",3,"showIcon","maxDate"],["for","dateFin",1,"block","mb-2","font-semibold"],["id","dateFin","formControlName","dateFin","dateFormat","dd/mm/yy","placeholder","S\xe9lectionner une date",3,"showIcon","minDate"],["for","aeroport",1,"block","mb-2","font-semibold"],[1,"required",2,"color","red !important"],["id","aeroport","formControlName","aeroport","optionLabel","nomAeroport","placeholder","S\xe9lectionnez un a\xe9roport","appendTo","body","filterBy","nomAeroport",3,"options","showClear","filter"],["pTemplate","item"],[1,"pi","pi-send","mr-2"],[1,"flex","justify-content-end","gap-2"],["pButton","","label","Annuler","icon","pi pi-times",1,"p-button-text","p-button-secondary",3,"click"],["pButton","","label","R\xe9initialiser","icon","pi pi-refresh",1,"p-button-text","p-button-warning",3,"click"],["pButton","","label","Appliquer","icon","pi pi-check",1,"p-button-primary",3,"click"],["pButton","","label","Annuler","icon","pi pi-times",1,"p-button-secondary",3,"click"],["pButton","","label","Valider","icon","pi pi-check",1,"p-button-primary",3,"disabled","click"],[1,"w-full","h-12rem","bg-white","border-2","border-green-500","border-round","overflow-hidden"],["alt","Empreinte main gauche",1,"w-full","h-full","object-fit-contain",3,"src"],[1,"w-full","h-12rem","bg-gray-200","border-round","flex","align-items-center","justify-content-center"],[1,"pi","pi-image","text-6xl","text-gray-400"],["alt","Empreinte main droite",1,"w-full","h-full","object-fit-contain",3,"src"],["alt","Empreinte pouces",1,"w-full","h-full","object-fit-contain",3,"src"],[1,"w-full","h-12rem","bg-white","border-2","border-green-500","border-round","overflow-hidden","flex","align-items-center","justify-content-center"],["alt","Photo biom\xe9trique",1,"max-w-full","max-h-full","object-fit-contain",3,"src"],[1,"pi","pi-user","text-6xl","text-gray-400"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),e.NdJ("selectionChange",function(b){return n.selectedEnregistrement=b}),e.YNc(4,H,10,1,"ng-template",4)(5,Y,51,0,"ng-template",5)(6,z,31,19,"ng-template",6)(7,$,8,0,"ng-template",7)(8,X,6,0,"ng-template",8),e.qZA()()(),e.TgZ(9,"p-dialog",9),e.NdJ("visibleChange",function(b){return n.filterDialog=b}),e.YNc(10,ne,16,13,"ng-template",10)(11,oe,4,0,"ng-template",11),e.qZA(),e.TgZ(12,"p-dialog",12),e.NdJ("visibleChange",function(b){return n.isDetailModalOpen=b}),e.TgZ(13,"form",13)(14,"p-fieldset",14)(15,"div",0)(16,"div",15)(17,"label",16),e._UZ(18,"i",17),e._uU(19,"Type de document "),e.qZA(),e._UZ(20,"p-dropdown",18),e.qZA(),e.TgZ(21,"div",15)(22,"label",19),e._UZ(23,"i",20),e._uU(24,"Num\xe9ro de document "),e.qZA(),e._UZ(25,"input",21),e.qZA(),e.TgZ(26,"div",15)(27,"label",22),e._UZ(28,"i",23),e._uU(29,"Num\xe9ro NIP "),e.qZA(),e._UZ(30,"input",24),e.qZA(),e.TgZ(31,"div",15)(32,"label",25),e._UZ(33,"i",26),e._uU(34,"Date de d\xe9livrance "),e.qZA(),e._UZ(35,"p-calendar",27),e.qZA(),e.TgZ(36,"div",28)(37,"label",29),e._UZ(38,"i",30),e._uU(39,"Lieu de d\xe9livrance "),e.qZA(),e._UZ(40,"input",31),e.qZA()()(),e.TgZ(41,"p-fieldset",32)(42,"div",0)(43,"div",15)(44,"label",33),e._UZ(45,"i",34),e._uU(46,"Nom de famille "),e.qZA(),e._UZ(47,"input",35),e.qZA(),e.TgZ(48,"div",15)(49,"label",36),e._UZ(50,"i",34),e._uU(51,"Pr\xe9nom "),e.qZA(),e._UZ(52,"input",37),e.qZA(),e.TgZ(53,"div",15)(54,"label",38),e._UZ(55,"i",26),e._uU(56,"Date de naissance "),e.qZA(),e._UZ(57,"p-calendar",39),e.qZA(),e.TgZ(58,"div",15)(59,"label",40),e._UZ(60,"i",30),e._uU(61,"Lieu de naissance "),e.qZA(),e._UZ(62,"input",41),e.qZA(),e.TgZ(63,"div",15)(64,"label",42),e._UZ(65,"i",43),e._uU(66,"Nationalit\xe9 "),e.qZA(),e._UZ(67,"input",44),e.qZA(),e.TgZ(68,"div",15)(69,"label",45),e._UZ(70,"i",46),e._uU(71,"Profession "),e.qZA(),e._UZ(72,"input",47),e.qZA()()(),e.TgZ(73,"p-fieldset",48)(74,"div",0)(75,"div",15)(76,"label",49),e._UZ(77,"i",50),e._uU(78,"Pays de r\xe9sidence "),e.qZA(),e._UZ(79,"input",51),e.qZA(),e.TgZ(80,"div",15)(81,"label",52),e._UZ(82,"i",53),e._uU(83,"Email "),e.qZA(),e._UZ(84,"input",54),e.qZA(),e.TgZ(85,"div",15)(86,"label",55),e._UZ(87,"i",56),e._uU(88,"T\xe9l\xe9phone Burkina "),e.qZA(),e._UZ(89,"input",57),e.qZA(),e.TgZ(90,"div",15)(91,"label",58),e._UZ(92,"i",56),e._uU(93,"T\xe9l\xe9phone \xc9tranger "),e.qZA(),e._UZ(94,"input",59),e.qZA(),e.TgZ(95,"div",15)(96,"label",60),e._UZ(97,"i",61),e._uU(98,"Adresse Burkina "),e.qZA(),e._UZ(99,"input",62),e.qZA(),e.TgZ(100,"div",15)(101,"label",63),e._UZ(102,"i",61),e._uU(103,"Adresse \xc9tranger "),e.qZA(),e._UZ(104,"input",64),e.qZA()()(),e.TgZ(105,"p-fieldset",65)(106,"div",0)(107,"div",15)(108,"label",66),e._UZ(109,"i",67),e._uU(110,"A\xe9roport d\xe9part "),e.qZA(),e._UZ(111,"input",68),e.qZA(),e.TgZ(112,"div",15)(113,"label",69),e._UZ(114,"i",70),e._uU(115,"A\xe9roport destination "),e.qZA(),e._UZ(116,"input",71),e.qZA(),e.TgZ(117,"div",15)(118,"label",72),e._UZ(119,"i",26),e._uU(120,"Date de vol "),e.qZA(),e._UZ(121,"p-calendar",73),e.qZA(),e.TgZ(122,"div",15)(123,"label",74),e._UZ(124,"i",75),e._uU(125,"Heure de vol "),e.qZA(),e._UZ(126,"input",76),e.qZA(),e.TgZ(127,"div",15)(128,"label",77),e._UZ(129,"i",78),e._uU(130,"Dur\xe9e de s\xe9jour (jours) "),e.qZA(),e._UZ(131,"input",79),e.qZA()()()(),e.YNc(132,ie,3,1,"ng-template",11),e.qZA(),e.TgZ(133,"p-dialog",80)(134,"div",0)(135,"div",81)(136,"div",82)(137,"div",83),e._UZ(138,"i",84),e.TgZ(139,"div")(140,"p",85),e._uU(141,"4 doigts main gauche"),e.qZA(),e.TgZ(142,"p",86),e._uU(143),e.qZA()()(),e.TgZ(144,"p-button",87),e.NdJ("onClick",function(){return n.capturerEmpreinte("empreinteGauche")}),e.qZA()(),e.YNc(145,ae,2,1,"div",88)(146,re,2,0),e.qZA(),e.TgZ(147,"div",81)(148,"div",82)(149,"div",83),e._UZ(150,"i",84),e.TgZ(151,"div")(152,"p",85),e._uU(153,"4 doigts main droite"),e.qZA(),e.TgZ(154,"p",86),e._uU(155),e.qZA()()(),e.TgZ(156,"p-button",87),e.NdJ("onClick",function(){return n.capturerEmpreinte("empreinteDroite")}),e.qZA()(),e.YNc(157,le,2,1,"div",88)(158,se,2,0),e.qZA(),e.TgZ(159,"div",81)(160,"div",82)(161,"div",83),e._UZ(162,"i",89),e.TgZ(163,"div")(164,"p",85),e._uU(165,"Les deux pouces"),e.qZA(),e.TgZ(166,"p",86),e._uU(167),e.qZA()()(),e.TgZ(168,"p-button",90),e.NdJ("onClick",function(){return n.capturerEmpreinte("empreintePouces")}),e.qZA()(),e.YNc(169,pe,2,1,"div",88)(170,ce,2,0),e.qZA(),e.TgZ(171,"div",81)(172,"div",82)(173,"div",83),e._UZ(174,"i",91),e.TgZ(175,"div")(176,"p",85),e._uU(177,"Photo d'identit\xe9"),e.qZA(),e.TgZ(178,"p",86),e._uU(179),e.qZA()()(),e.TgZ(180,"p-button",92),e.NdJ("onClick",function(){return n.demarrerCamera("biometrique")}),e.qZA()(),e.YNc(181,de,2,1,"div",93)(182,ue,2,0),e.qZA()(),e.TgZ(183,"div",94)(184,"p-button",95),e.NdJ("onClick",function(){return n.closeBiometricModal()}),e.qZA(),e.TgZ(185,"p-button",96),e.NdJ("onClick",function(){return n.validerAvecBiometrie()}),e.qZA()()(),e._UZ(186,"p-toast",97)(187,"p-confirmDialog")(188,"app-loading-spinner")),2&o){let l;e.xp6(2),e.Q6J("value",n.enregistrementList())("columns",n.cols)("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(64,me))("showCurrentPageReport",!0)("globalFilterFields",e.DdM(65,_e))("selection",n.selectedEnregistrement)("rowHover",!0)("loading",n.loading())("filterDelay",300),e.xp6(7),e.Akn(e.DdM(66,ge)),e.Q6J("visible",n.filterDialog)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(3),e.Akn(e.DdM(67,fe)),e.Q6J("visible",n.isDetailModalOpen)("header",n.selectedEnregistrement.id?"Modification de l'enregistrement":"Nouvel enregistrement")("modal",!0)("closable",!0)("draggable",!1),e.xp6(1),e.Q6J("formGroup",n.editFormGroup),e.xp6(1),e.Q6J("toggleable",!1),e.xp6(6),e.Q6J("options",n.typesDocument)("showClear",!0),e.xp6(15),e.Q6J("showIcon",!0),e.xp6(6),e.Q6J("toggleable",!1),e.xp6(16),e.Q6J("showIcon",!0),e.xp6(16),e.Q6J("toggleable",!1),e.xp6(32),e.Q6J("toggleable",!1),e.xp6(16),e.Q6J("showIcon",!0),e.xp6(12),e.Akn(e.DdM(68,he)),e.Q6J("visible",n.isCaptureBiometriqueModalOpen)("modal",!0)("closable",!0)("breakpoints",e.DdM(69,Te)),e.xp6(9),e.Tol(n.empreinteGauche().capturee?"text-green-600":"text-gray-500"),e.xp6(1),e.hij(" ",n.empreinteGauche().capturee?"Captur\xe9":"Pr\xeat pour la capture"," "),e.xp6(1),e.Q6J("label",n.empreinteGauche().capturee?"Recapturer":"Capturer"),e.xp6(1),e.um2(145,n.empreinteGauche().image?145:146),e.xp6(9),e.Tol(n.empreinteDroite().capturee?"text-green-600":"text-gray-500"),e.xp6(1),e.hij(" ",n.empreinteDroite().capturee?"Captur\xe9":"Pr\xeat pour la capture"," "),e.xp6(1),e.Q6J("label",n.empreinteDroite().capturee?"Recapturer":"Capturer"),e.xp6(1),e.um2(157,n.empreinteDroite().image?157:158),e.xp6(9),e.Tol(n.empreintePouces().capturee?"text-green-600":"text-gray-500"),e.xp6(1),e.hij(" ",n.empreintePouces().capturee?"Captur\xe9":"Pr\xeat pour la capture"," "),e.xp6(1),e.Q6J("label",n.empreintePouces().capturee?"Recapturer":"Capturer"),e.xp6(1),e.um2(169,n.empreintePouces().image?169:170),e.xp6(9),e.Tol(n.capturedPhotoPourBiometrie()?"text-green-600":"text-gray-500"),e.xp6(1),e.hij(" ",n.capturedPhotoPourBiometrie()?"Photo captur\xe9e":"Pr\xeat pour la capture"," "),e.xp6(1),e.Q6J("label",n.capturedPhotoPourBiometrie()?"Reprendre":"Prendre"),e.xp6(1),e.um2(181,(l=n.capturedPhotoPourBiometrie())?181:182,l),e.xp6(4),e.Q6J("loading",n.isSaving())("disabled",!(n.empreinteGauche().capturee&&n.empreinteDroite().capturee&&n.empreintePouces().capturee&&n.capturedPhotoPourBiometrie())),e.xp6(1),e.Akn(e.DdM(70,ve))}},dependencies:[a.ez,a.O5,a.uU,g.U$,g.iA,_.jx,g.lQ,g.fz,K.g,x.hJ,x.Hq,x.zx,A.T,v.z,v.u,O.V,I.EV,I.FN,u.j,u.o,h.UX,h._Y,h.Fj,h.wV,h.JJ,h.JL,h.sg,h.u,h.u5,p.kW,p.Lt,Z._8,Z.f,C.U,m.S,m.V,V.L,V.p,q.Bz,E.q4,S.W,S.V,c.D,c.Q],styles:[".badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;border-radius:10px;font-size:.75rem;font-weight:600;text-transform:uppercase;color:#fff}.badge-primary[_ngcontent-%COMP%]{background-color:#007bff}.badge-success[_ngcontent-%COMP%]{background-color:#28a745}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545}.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d}"]})}return s})()},3855:(P,y,i)=>{i.d(y,{F9:()=>a,H2:()=>d,QE:()=>_,UD:()=>x,w:()=>e});const d=u=>u.enregistrementState.enregistrements,a=u=>u.enregistrementState.enregistrement,e=u=>u.enregistrementState.totalItems,_=u=>u.enregistrementState.voyageurAttentes,x=u=>u.enregistrementState.preEnregistrements},5261:(P,y,i)=>{i.d(y,{F:()=>d});var d=function(e){return e[e.EN_ATTENTE=0]="EN_ATTENTE",e[e.VALIDE=1]="VALIDE",e[e.REJETE=2]="REJETE",e[e.ANNULE=3]="ANNULE",e}(d||{})},7791:(P,y,i)=>{i.d(y,{L:()=>q,p:()=>Q});var d=i(6825),a=i(6814),e=i(9212),h=i(5219),_=i(1604),x=i(3983),u=i(4480),A=i(2332);function g(r,E){1&r&&e._UZ(0,"PlusIcon",11),2&r&&(e.Q6J("styleClass","p-fieldset-toggler"),e.uIk("data-pc-section","togglericon"))}function I(r,E){1&r&&e.GkF(0)}function O(r,E){if(1&r&&(e.TgZ(0,"span",12),e.YNc(1,I,1,0,"ng-container",6),e.qZA()),2&r){const c=e.oxw(3);e.uIk("data-pc-section","togglericon"),e.xp6(1),e.Q6J("ngTemplateOutlet",c.expandIconTemplate)}}function p(r,E){if(1&r&&(e.ynx(0),e.YNc(1,g,1,2,"PlusIcon",9)(2,O,2,2,"span",10),e.BQk()),2&r){const c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!c.expandIconTemplate),e.xp6(1),e.Q6J("ngIf",c.expandIconTemplate)}}function C(r,E){1&r&&e._UZ(0,"MinusIcon",11),2&r&&(e.Q6J("styleClass","p-fieldset-toggler"),e.uIk("aria-hidden",!0)("data-pc-section","togglericon"))}function m(r,E){1&r&&e.GkF(0)}function v(r,E){if(1&r&&(e.TgZ(0,"span",12),e.YNc(1,m,1,0,"ng-container",6),e.qZA()),2&r){const c=e.oxw(3);e.uIk("data-pc-section","togglericon"),e.xp6(1),e.Q6J("ngTemplateOutlet",c.collapseIconTemplate)}}function Z(r,E){if(1&r&&(e.ynx(0),e.YNc(1,C,1,3,"MinusIcon",9)(2,v,2,2,"span",10),e.BQk()),2&r){const c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!c.collapseIconTemplate),e.xp6(1),e.Q6J("ngIf",c.collapseIconTemplate)}}function w(r,E){1&r&&e.GkF(0)}function M(r,E){if(1&r){const c=e.EpF();e.ynx(0),e.TgZ(1,"a",7),e.NdJ("click",function(f){e.CHM(c);const U=e.oxw();return e.KtG(U.toggle(f))})("keydown",function(f){e.CHM(c);const U=e.oxw();return e.KtG(U.onKeyDown(f))}),e.YNc(2,p,3,2,"ng-container",8)(3,Z,3,2,"ng-container",8)(4,w,1,0,"ng-container",6),e.qZA(),e.BQk()}if(2&r){const c=e.oxw(),D=e.MAs(4);e.xp6(1),e.uIk("id",c.id+"_header")("aria-controls",c.id+"_content")("aria-expanded",!c.collapsed)("aria-label",c.buttonAriaLabel),e.xp6(1),e.Q6J("ngIf",c.collapsed),e.xp6(1),e.Q6J("ngIf",!c.collapsed),e.xp6(1),e.Q6J("ngTemplateOutlet",D)}}function F(r,E){1&r&&e.GkF(0)}function B(r,E){if(1&r&&(e.TgZ(0,"span",13),e._uU(1),e.qZA(),e.Hsn(2,1),e.YNc(3,F,1,0,"ng-container",6)),2&r){const c=e.oxw();e.uIk("data-pc-section","legendtitle"),e.xp6(1),e.Oqu(c.legend),e.xp6(2),e.Q6J("ngTemplateOutlet",c.headerTemplate)}}function N(r,E){1&r&&e.GkF(0)}const k=["*",[["p-header"]]],J=(r,E)=>({"p-fieldset p-component":!0,"p-fieldset-toggleable":r,"p-fieldset-expanded":E}),K=r=>({transitionParams:r,height:"0"}),G=r=>({value:"hidden",params:r}),V=r=>({transitionParams:r,height:"*"}),S=r=>({value:"visible",params:r}),j=["*","p-header"];let Q=(()=>{class r{el;legend;toggleable;collapsed=!1;style;styleClass;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new e.vpe;onBeforeToggle=new e.vpe;onAfterToggle=new e.vpe;templates;get id(){return(0,A.Th)()}get buttonAriaLabel(){return this.legend}animating;headerTemplate;contentTemplate;collapseIconTemplate;expandIconTemplate;constructor(c){this.el=c}ngAfterContentInit(){this.templates.forEach(c=>{switch(c.getType()){case"header":this.headerTemplate=c.template;break;case"expandicon":this.expandIconTemplate=c.template;break;case"collapseicon":this.collapseIconTemplate=c.template;break;case"content":this.contentTemplate=c.template}})}toggle(c){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:c,collapsed:this.collapsed}),this.collapsed?this.expand():this.collapse(),this.onAfterToggle.emit({originalEvent:c,collapsed:this.collapsed}),c.preventDefault()}onKeyDown(c){("Enter"===c.code||"Space"===c.code)&&(this.toggle(c),c.preventDefault())}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}static \u0275fac=function(D){return new(D||r)(e.Y36(e.SBq))};static \u0275cmp=e.Xpm({type:r,selectors:[["p-fieldset"]],contentQueries:function(D,f,U){if(1&D&&e.Suo(U,h.jx,4),2&D){let L;e.iGM(L=e.CRH())&&(f.templates=L)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:"toggleable",collapsed:"collapsed",style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:j,decls:9,vars:28,consts:[[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["pRipple","","tabindex","0","role","button",3,"click","keydown"],[4,"ngIf"],[3,"styleClass",4,"ngIf"],["class","p-fieldset-toggler",4,"ngIf"],[3,"styleClass"],[1,"p-fieldset-toggler"],[1,"p-fieldset-legend-text"]],template:function(D,f){if(1&D&&(e.F$t(k),e.TgZ(0,"fieldset",0)(1,"legend",1),e.YNc(2,M,5,7,"ng-container",2)(3,B,4,3,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.NdJ("@fieldsetContent.done",function(){return f.onToggleDone()}),e.TgZ(6,"div",5),e.Hsn(7),e.YNc(8,N,1,0,"ng-container",6),e.qZA()()()),2&D){const U=e.MAs(4);e.Tol(f.styleClass),e.Q6J("ngClass",e.WLB(17,J,f.toggleable,!f.collapsed&&f.toggleable))("ngStyle",f.style),e.uIk("id",f.id)("data-pc-name","fieldset")("data-pc-section","root"),e.xp6(1),e.uIk("data-pc-section","legend"),e.xp6(1),e.Q6J("ngIf",f.toggleable)("ngIfElse",U),e.xp6(3),e.Q6J("@fieldsetContent",f.collapsed?e.VKq(22,G,e.VKq(20,K,f.transitionOptions)):e.VKq(26,S,e.VKq(24,V,f.animating?f.transitionOptions:"0ms"))),e.uIk("id",f.id+"_content")("aria-labelledby",f.id+"_header")("aria-hidden",f.collapsed)("data-pc-section","toggleablecontent"),e.xp6(1),e.uIk("data-pc-section","content"),e.xp6(2),e.Q6J("ngTemplateOutlet",f.contentTemplate)}},dependencies:()=>[a.mk,a.O5,a.tP,a.PC,u.H,_.V,x.p],styles:["@layer primeng{.p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}}\n"],encapsulation:2,data:{animation:[(0,d.X$)("fieldsetContent",[(0,d.SB)("hidden",(0,d.oB)({height:"0"})),(0,d.SB)("visible",(0,d.oB)({height:"*"})),(0,d.eR)("visible <=> hidden",[(0,d.jt)("{{transitionParams}}")]),(0,d.eR)("void => *",(0,d.jt)(0))])]},changeDetection:0})}return r})(),q=(()=>{class r{static \u0275fac=function(D){return new(D||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[a.ez,u.T,_.V,x.p,h.m8]})}return r})()},1604:(P,y,i)=>{i.d(y,{V:()=>h});var d=i(6814),a=i(9212),e=i(4713);let h=(()=>{class _ extends e.s{static \u0275fac=(()=>{let u;return function(g){return(u||(u=a.n5z(_)))(g||_)}})();static \u0275cmp=a.Xpm({type:_,selectors:[["MinusIcon"]],standalone:!0,features:[a.qOj,a.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(A,g){1&A&&(a.O4$(),a.TgZ(0,"svg",0),a._UZ(1,"path",1),a.qZA()),2&A&&(a.Tol(g.getClassNames()),a.uIk("aria-label",g.ariaLabel)("aria-hidden",g.ariaHidden)("role",g.role))},dependencies:[d.ez],encapsulation:2})}return _})()},3983:(P,y,i)=>{i.d(y,{p:()=>h});var d=i(9212),a=i(4713),e=i(2332);let h=(()=>{class _ extends a.s{pathId;ngOnInit(){this.pathId="url(#"+(0,e.Th)()+")"}static \u0275fac=(()=>{let u;return function(g){return(u||(u=d.n5z(_)))(g||_)}})();static \u0275cmp=d.Xpm({type:_,selectors:[["PlusIcon"]],standalone:!0,features:[d.qOj,d.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(A,g){1&A&&(d.O4$(),d.TgZ(0,"svg",0)(1,"g"),d._UZ(2,"path",1),d.qZA(),d.TgZ(3,"defs")(4,"clipPath",2),d._UZ(5,"rect",3),d.qZA()()()),2&A&&(d.Tol(g.getClassNames()),d.uIk("aria-label",g.ariaLabel)("aria-hidden",g.ariaHidden)("role",g.role),d.xp6(1),d.uIk("clip-path",g.pathId),d.xp6(3),d.Q6J("id",g.pathId))},encapsulation:2})}return _})()},6263:(P,y,i)=>{i.d(y,{V:()=>I,W:()=>O});var d=i(6814),a=i(9212),e=i(5219);function h(p,C){if(1&p&&a._UZ(0,"span",5),2&p){const m=a.oxw(2);a.Q6J("ngClass",m.icon)}}function _(p,C){if(1&p&&(a.ynx(0),a.YNc(1,h,1,1,"span",4),a.BQk()),2&p){const m=a.oxw();a.xp6(1),a.Q6J("ngIf",m.icon)}}function x(p,C){}function u(p,C){1&p&&a.YNc(0,x,0,0,"ng-template")}function A(p,C){if(1&p&&(a.TgZ(0,"span",6),a.YNc(1,u,1,0,null,7),a.qZA()),2&p){const m=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",m.iconTemplate)}}const g=["*"];let I=(()=>{class p{style;styleClass;severity;value;icon;rounded;templates;iconTemplate;ngAfterContentInit(){this.templates?.forEach(m=>{"icon"===m.getType()&&(this.iconTemplate=m.template)})}containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}static \u0275fac=function(v){return new(v||p)};static \u0275cmp=a.Xpm({type:p,selectors:[["p-tag"]],contentQueries:function(v,Z,w){if(1&v&&a.Suo(w,e.jx,4),2&v){let M;a.iGM(M=a.CRH())&&(Z.templates=M)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:g,decls:6,vars:7,consts:[[3,"ngClass","ngStyle"],[4,"ngIf"],["class","p-tag-icon",4,"ngIf"],[1,"p-tag-value"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-icon",3,"ngClass"],[1,"p-tag-icon"],[4,"ngTemplateOutlet"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"span",0),a.Hsn(1),a.YNc(2,_,2,1,"ng-container",1)(3,A,2,1,"span",2),a.TgZ(4,"span",3),a._uU(5),a.qZA()()),2&v&&(a.Tol(Z.styleClass),a.Q6J("ngClass",Z.containerClass())("ngStyle",Z.style),a.xp6(2),a.Q6J("ngIf",!Z.iconTemplate),a.xp6(1),a.Q6J("ngIf",Z.iconTemplate),a.xp6(2),a.Oqu(Z.value))},dependencies:[d.mk,d.O5,d.tP,d.PC],styles:["@layer primeng{.p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}}\n"],encapsulation:2,changeDetection:0})}return p})(),O=(()=>{class p{static \u0275fac=function(v){return new(v||p)};static \u0275mod=a.oAB({type:p});static \u0275inj=a.cJS({imports:[d.ez,e.m8,e.m8]})}return p})()},6340:(P,y,i)=>{i.d(y,{V:()=>O});var d=i(6814),a=i(9212);let O=(()=>{class p{static \u0275fac=function(v){return new(v||p)};static \u0275mod=a.oAB({type:p});static \u0275inj=a.cJS({imports:[d.ez]})}return p})()}}]);