"use strict";(self.webpackChunkultima_ng=self.webpackChunkultima_ng||[]).push([[419],{419:(R,h,o)=>{o.r(h),o.d(h,{PaysComponent:()=>H});var x=o(6814),a=o(95),r=o(5219),y=o(707),f=o(3714),P=o(4480),c=o(9232),b=o(4104),A=o(6340),F=o(3173),S=o(1712),v=o(7213),T=o(3904),Z=o(3259),U=o(8645),C=o(9773),m=o(4221),d=o(8469);const G=n=>n.paysState.payss;var g=o(485),J=o(7703),t=o(9212);function N(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"div")(2,"button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addPays())}),t.qZA()(),t._UZ(3,"h5",22),t.TgZ(4,"span",23),t._UZ(5,"i",24),t.TgZ(6,"input",25,26),t.NdJ("input",function(s){t.CHM(e);const l=t.oxw(),p=t.MAs(3);return t.KtG(l.onGlobalFilter(p,s))}),t.qZA()()()}}function D(n,u){1&n&&(t.TgZ(0,"tr")(1,"th",27),t._uU(2,"Code "),t._UZ(3,"p-columnFilter",28),t.qZA(),t.TgZ(4,"th",27),t._uU(5,"Nom "),t._UZ(6,"p-columnFilter",29),t.qZA(),t.TgZ(7,"th",27),t._uU(8,"Action"),t.qZA()())}function B(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"tr",30)(1,"td",31),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t.TgZ(7,"td",32)(8,"button",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.update(l))}),t.qZA(),t.TgZ(9,"button",34),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.deletePays(l))}),t.qZA()()()}if(2&n){const e=u.$implicit;t.Q6J("pSelectableRow",e),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.nom),t.xp6(2),t.hij(" ",e.nom,"")}}function M(n,u){1&n&&(t.TgZ(0,"tr")(1,"td",35)(2,"span",36),t._uU(3," Aucun pays trouv\xe9 ! "),t.qZA()()())}const j=()=>[10,20,30],E=()=>["nom","code"],$=()=>({width:"400px"}),w=()=>({marginTop:"80px"});let H=(()=>{class n{constructor(e,i,s,l){this.fb=e,this.store=i,this.messageService=s,this.confirmationService=l,this.destroy$=new U.x,this.paysList=[],this.selectedPays={},this.cols=[],this.pays={},this.payss=[],this.paysDialog=!1,this.popupHeader="Enregistrer un pays",this.isUpdate=!1,this.loading=!0}ngOnInit(){this.cols=[{field:"code",header:"Code"},{field:"nom",header:"Pays"}],this.createFormPays(),this.paysList$=this.store.pipe((0,m.Ys)(G)),this.store.dispatch(d.Pd()),this.paysList$.pipe((0,C.R)(this.destroy$)).subscribe(e=>{e&&(this.loading=!1,this.payss=e)}),this.store.pipe((0,m.Ys)(J.i),(0,C.R)(this.destroy$)).subscribe(e=>{e&&e.message&&this.showToast(e.status,e.message)})}showToast(e,i){switch(this.messageService.clear(),e){case g.sB.success:this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:i,life:3e3});break;case g.sB.error:this.messageService.add({severity:"error",summary:"Erreur",detail:i,life:5e3});break;case g.sB.warning:this.messageService.add({severity:"warn",summary:"Attention",detail:i,life:4e3})}}onRowSelect(e){console.log(e.data)}createFormPays(){this.paysFormGroup=this.fb.group({id:this.fb.control("",[]),code:this.fb.control("",[a.kI.required]),nom:this.fb.control("",[a.kI.required,a.kI.minLength(2)])})}handleActionsClick(e){this.selectedPays=e}openNew(){this.paysDialog=!0}addPays(){this.pays={},this.paysDialog=!0}update(e){this.popupHeader="Modifier un pays",this.paysFormGroup.patchValue({id:e.id,code:e.code,nom:e.nom}),this.paysDialog=!0,this.isUpdate=!0}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}onSave(){const e=this.paysFormGroup.value;console.log("===============profilFormGroup=====================",this.paysFormGroup.value),this.confirmationService.confirm({message:"Etes vous sur de vouloir ajouter ce pays?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",acceptLabel:"Oui",rejectLabel:"Non",accept:()=>{this.store.dispatch(e.id?d.oJ(e):d.k7(e)),this.paysFormGroup.reset()}}),this.paysDialog=!1}deletePays(e){this.store.dispatch(d.mM(e))}cancel(){this.paysFormGroup.reset(),this.paysDialog=!1,this.isUpdate=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(a.qu),t.Y36(m.yh),t.Y36(r.ez),t.Y36(r.YP))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-pays"]],standalone:!0,features:[t._Bn([r.ez,r.YP]),t.jDz],decls:24,vars:23,consts:[[1,"grid"],[1,"col-12","md:col-12"],["styleClass"," p-datatable-gridlines p-datatable-sm p-datatable","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","paginator","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visible","modal","closable","header","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid"],[1,"field"],["for","nom"],["id","nom","type","text","pInputText","","formControlName","nom","placeholder","Ex: Burkina Faso"],["for","code"],["id","code","type","text","pInputText","","formControlName","code","placeholder","Ex: BF"],[1,"flex","justify-content-end","gap-2","mt-3"],["pButton","","label","Annuler","icon","pi pi-times","type","button",1,"p-button-secondary",3,"click"],["pButton","","label","Enregistrer","icon","pi pi-check","type","submit",1,"p-button-success",3,"disabled"],["position","top-center"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Nouveau Pays","icon","pi pi-plus",1,"p-button-success","mr-2","mb-2",3,"click"],[1,"p-button-outlined","mb-2"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher",1,"w-full",3,"input"],["filter",""],[2,"font-weight","bold"],["type","text","display","menu","field","code"],["type","text","display","menu","field","nom"],[3,"pSelectableRow"],[1,"table-separator"],[1,"text-right"],["pButton","","icon","pi pi-pencil","pTooltip","Modifier",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Supprimer",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","8",2,"text-align","center","font-size","1.2em","color","red","font-weight","bold"],[1,"text-danger"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),t.NdJ("selectionChange",function(p){return s.selectedPays=p}),t.YNc(4,N,8,0,"ng-template",4)(5,D,9,0,"ng-template",5)(6,B,10,4,"ng-template",6)(7,M,4,0,"ng-template",7),t.qZA()(),t.TgZ(8,"p-dialog",8),t.NdJ("visibleChange",function(p){return s.paysDialog=p}),t.TgZ(9,"form",9),t.NdJ("ngSubmit",function(){return s.onSave()}),t.TgZ(10,"div",10)(11,"div",11)(12,"label",12),t._uU(13,"Nom du pays"),t.qZA(),t._UZ(14,"input",13),t.qZA(),t.TgZ(15,"div",11)(16,"label",14),t._uU(17,"Code du pays"),t.qZA(),t._UZ(18,"input",15),t.qZA()(),t.TgZ(19,"div",16)(20,"button",17),t.NdJ("click",function(){return s.cancel()}),t.qZA(),t._UZ(21,"button",18),t.qZA()()(),t._UZ(22,"p-toast",19)(23,"p-confirmDialog"),t.qZA()),2&i&&(t.xp6(2),t.Q6J("value",s.payss)("columns",s.cols)("rows",5)("paginator",!0)("rowsPerPageOptions",t.DdM(19,j))("showCurrentPageReport",!0)("globalFilterFields",t.DdM(20,E))("selection",s.selectedPays)("rowHover",!0),t.xp6(6),t.Akn(t.DdM(21,$)),t.Q6J("visible",s.paysDialog)("modal",!0)("closable",!1)("header",s.popupHeader),t.xp6(1),t.Q6J("formGroup",s.paysFormGroup),t.xp6(12),t.Q6J("disabled",s.paysFormGroup.invalid),t.xp6(1),t.Akn(t.DdM(22,w)))},dependencies:[x.ez,c.U$,c.iA,r.jx,c.Ei,c.xl,y.hJ,y.Hq,P.T,Z.z,Z.u,A.V,b.EV,b.FN,f.j,f.o,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,F.l,S.U,v.S,v.V,T.D,T.Q]})}return n})()}}]);