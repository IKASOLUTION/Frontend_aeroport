"use strict";(self.webpackChunkultima_ng=self.webpackChunkultima_ng||[]).push([[950],{2950:(Se,U,r)=>{r.r(U),r.d(U,{UserComponent:()=>Le});var g=r(5219),d=r(9232),k=r(8645),h=r(9773),f=r(6814),L=r(3668),p=r(95),T=r(707),C=r(4480),A=r(4104),Q=r(6340),S=r(6022),M=r(3714),G=r(6218),x=r(3965),O=r(1865),B=r(9653),w=r(7213),E=r(4055),y=r(3173),P=r(1423),Y=r(8454),c=r(4221),m=r(6188),H=r(3617),_=r(8562);const R=o=>o.profilState.profils;var b=r(485),K=r(7703),j=r(2269);const z=o=>o.menuActionState.menuActions;var V=r(6821),W=r(7995),X=r(1676),e=r(9212),q=r(1470),D=r(9862);let ee=(()=>{class o{constructor(t){this.http=t,this.resourceUrl=q.T+"/users"}create(t){return this.http.post(`${this.resourceUrl}/`,t,{observe:"response"})}update(t){return this.http.put(`${this.resourceUrl}/${t.id}`,t,{observe:"response"})}deleteAll(t){return this.http.put(`${this.resourceUrl}/all`,t,{observe:"response"})}find(t){return this.http.get(`${this.resourceUrl}/${t}`,{observe:"response"})}query(t){return this.http.get(`${this.resourceUrl}/`,{observe:"response"})}findUserByEmailExist(){return this.http.get(`${this.resourceUrl}/email`,{observe:"response"})}delete(t){return this.http.delete(`${this.resourceUrl}/${t}`,{observe:"response"})}activerDesactiver(t){return this.http.put(`${this.resourceUrl}/active-desactive-user/${t.id}`,t,{observe:"response"})}isActive(t){return this.http.put(`${this.resourceUrl}/active-desactive-user/${t}`,{observe:"response"})}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(D.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var te=r(9623);let ie=(()=>{class o{constructor(t){this.http=t,this.resourceUrl=q.T+"/profils"}create(t){return this.http.post(this.resourceUrl,t,{observe:"response"})}update(t){return this.http.put(`${this.resourceUrl}/${t.id}`,t,{observe:"response"})}deleteAll(t){return this.http.put(`${this.resourceUrl}/all`,t,{observe:"response"})}find(t){return this.http.get(`${this.resourceUrl}/${t}`,{observe:"response"})}query(t){return this.http.get(this.resourceUrl,{observe:"response"})}delete(t){return this.http.delete(`${this.resourceUrl}/${t}`,{observe:"response"})}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(D.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",50)(1,"div")(2,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addUser())}),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addProfil())}),e.qZA()(),e._UZ(4,"h5",53),e.TgZ(5,"span",54),e._UZ(6,"i",55),e.TgZ(7,"input",56,57),e.NdJ("input",function(i){e.CHM(t);const s=e.oxw(),l=e.MAs(3);return e.KtG(s.onGlobalFilter(l,i))}),e.qZA()()()}}function le(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",58),e._uU(2,"Profil "),e._UZ(3,"p-columnFilter",59),e.qZA(),e.TgZ(4,"th",58),e._uU(5,"Login "),e._UZ(6,"p-columnFilter",60),e.qZA(),e.TgZ(7,"th",58),e._uU(8,"Nom "),e._UZ(9,"p-columnFilter",61),e.qZA(),e.TgZ(10,"th",58),e._uU(11,"Prenom "),e._UZ(12,"p-columnFilter",62),e.qZA(),e.TgZ(13,"th",58),e._uU(14,"Status "),e.qZA(),e.TgZ(15,"th",58),e._uU(16,"Action"),e.qZA()())}function ne(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"p-splitButton",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.selectedItem=i)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("model",t.items)}}function se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"p-splitButton",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.selectedItem=i)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("model",t.itemsNoActif)}}const J=(o,a)=>({activated:o,"not-activated":a});function re(o,a){if(1&o&&(e.TgZ(0,"tr",63)(1,"td",64),e._uU(2),e.qZA(),e.TgZ(3,"td",64),e._uU(4),e.qZA(),e.TgZ(5,"td",64),e._uU(6),e.qZA(),e.TgZ(7,"td",64),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",66),e.YNc(12,ne,1,1,"p-splitButton",67)(13,se,1,1,"p-splitButton",67),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(null==t.profil?null:t.profil.libelle),e.xp6(2),e.Oqu(t.login),e.xp6(2),e.hij(" ",t.nom,""),e.xp6(2),e.hij(" ",t.prenom,""),e.xp6(1),e.Q6J("ngClass",e.WLB(9,J,t.activated,!t.activated)),e.xp6(1),e.hij(" ",t.activated?"ACTIF":"INACTIF"," "),e.xp6(2),e.Q6J("ngIf",!t.activated),e.xp6(1),e.Q6J("ngIf",t.activated)}}function ae(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",69)(2,"span",70),e._uU(3," Aucun utilisateur trouv\xe9 ! "),e.qZA()()())}function pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveUser())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.annuler())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!(t.user.prenom&&t.user.email&&t.user.profil&&t.user.nom))}}function de(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1,"Voulez-vous supprimer "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij("",t.user.nom," ")}}function ue(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmDelete())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteuserDialog=!1)}),e.qZA()}}function ce(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",73),e._uU(2,"Code "),e._UZ(3,"p-sortIcon",74)(4,"p-columnFilter",75),e.qZA(),e.TgZ(5,"th",76),e._uU(6,"Libelle "),e._UZ(7,"p-sortIcon",77)(8,"p-columnFilter",78),e.qZA()())}function me(o,a){if(1&o&&(e.TgZ(0,"tr",63)(1,"td",64),e._uU(2),e.qZA(),e.TgZ(3,"td",64),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.menuActionCode),e.xp6(2),e.hij(" ",t.menuActionLibelle,"")}}function ge(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",69)(2,"span",70),e._uU(3," Aucun droit trouv\xe9 ! "),e.qZA()()())}const N=()=>["code","libelle"];function he(o,a){if(1&o&&(e.TgZ(0,"div")(1,"p-table",72,3),e.YNc(3,ce,9,0,"ng-template",5)(4,me,5,3,"ng-template",6)(5,ge,4,0,"ng-template",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.menus)("rows",5)("globalFilterFields",e.DdM(6,N))("paginator",!0)("loading",t.loading)("filterDelay",0)}}function _e(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fermer())}),e.qZA()}}function fe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",50)(1,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.newProfil())}),e.qZA(),e.TgZ(2,"span",54),e._UZ(3,"i",55),e.TgZ(4,"input",56,57),e.NdJ("input",function(i){e.CHM(t);const s=e.oxw(),l=e.MAs(92);return e.KtG(s.onGlobalFilter(l,i))}),e.qZA()()()}}function be(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",58),e._uU(2,"Code "),e._UZ(3,"p-columnFilter",81),e.qZA(),e.TgZ(4,"th",58),e._uU(5,"Libelle "),e._UZ(6,"p-columnFilter",82),e.qZA(),e.TgZ(7,"th",58),e._uU(8,"Action"),e.qZA()()),2&o&&(e.xp6(3),e.Q6J("matchMode","contains"),e.xp6(3),e.Q6J("matchMode","contains"))}function Ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",63)(1,"td",64),e._uU(2),e.qZA(),e.TgZ(3,"td",64),e._uU(4),e.qZA(),e.TgZ(5,"td",66)(6,"p-splitButton",68),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectedProfilItem=s)}),e.qZA()()()}if(2&o){const t=a.$implicit,n=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.hij(" ",t.libelle,""),e.xp6(2),e.Q6J("model",n.profilItems)}}function ve(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",69)(2,"span",70),e._uU(3," Aucun profil trouv\xe9 ! "),e.qZA()()())}function Ue(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fermerGestionProfil())}),e.qZA()}}function Te(o,a){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code "),e._UZ(3,"p-columnFilter",75),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Libelle "),e._UZ(6,"p-columnFilter",78),e.qZA()())}function Ce(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.menuActionCode," "),e.xp6(2),e.hij(" ",t.menuActionLibelle," ")}}const F=()=>["menuActionCode","menuActionLibelle"],Z=()=>[10,20,30];function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p-table",83,3),e.NdJ("selectionChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedMenus=i)}),e.YNc(3,Te,7,0,"ng-template",5)(4,Ce,5,2,"ng-template",6),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.menuActionsDetail)("columns",t.cols)("rows",5)("globalFilterFields",e.DdM(9,F))("paginator",!0)("rowsPerPageOptions",e.DdM(10,Z))("showCurrentPageReport",!0)("selection",t.selectedMenus)("rowHover",!0)}}function Me(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fermerProfil())}),e.qZA()}}function xe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",50),e._UZ(1,"h5",53),e.TgZ(2,"span",54),e._UZ(3,"i",55),e.TgZ(4,"input",56,57),e.NdJ("input",function(i){e.CHM(t);const s=e.oxw(),l=e.MAs(3);return e.KtG(s.onGlobalFilter(l,i))}),e.qZA()()()}}function we(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",84),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Code "),e._UZ(5,"p-columnFilter",75),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Libelle "),e._UZ(8,"p-columnFilter",78),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Module "),e._UZ(11,"p-columnFilter",85),e.qZA()())}function ye(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",86),e.qZA(),e.TgZ(3,"td",87),e._uU(4),e.qZA(),e.TgZ(5,"td",88),e._uU(6),e.qZA(),e.TgZ(7,"td",89),e._uU(8),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.hij(" ",t.menuActionCode," "),e.xp6(2),e.hij(" ",t.menuActionLibelle," "),e.xp6(2),e.hij(" ",t.moduleParamLibelle," ")}}function Pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveProfil())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.annulerProfile())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.profil.code||!t.profil.libelle)}}function qe(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1,"Voulez-vous supprimer "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij("",t.profil.libelle," ")}}function De(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmProfilDelete())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteprofilDialog=!1)}),e.qZA()}}const Je=()=>["agence.filiale.nom","agence.libelle","profil.libelle","login","prenom","nom"],Ne=()=>({width:"75%"}),$=()=>({width:"100%"}),u=()=>({standalone:!0}),Fe=()=>({width:"35rem"}),$e=()=>({width:"100%"}),Ie=()=>({marginTop:"80px"}),I=()=>({width:"450px"}),ke=()=>({width:"60%"}),v=()=>({width:"65%"});let Le=(()=>{class o{constructor(t,n,i,s,l,Qe){this.messageService=t,this.confirmationService=n,this.store=i,this.userService=s,this.accountService=l,this.profilService=Qe,this.countries=[],this.selectedItem=null,this.selectedProfilItem=null,this.userDialog=!1,this.destroy$=new k.x,this.deleteuserDialog=!1,this.deleteusersDialog=!1,this.users=[],this.user={},this.detailUser={},this.selectedusers=[],this.submitted=!1,this.cols=[],this.statuses=[],this.rowsPerPageOptions=[5,10,20],this.profils=[],this.visible=!1,this.items=[],this.profilItems=[],this.itemsNoActif=[],this.newS=!1,this.userD=!1,this.userbyId={},this.emails=[],this.display=!1,this.displayMenu=!1,this.menus=[],this.displayProfil=!1,this.addNewProfil=!1,this.profil={},this.profilDialog=!1,this.menuActions=[],this.creeMenu=!1,this.isProfil=!1,this.detailProfil={},this.menuActionsDetail=[],this.emailUser="",this.menuAction={deleted:!1,id:0,menuActionCode:"",menuActionLibelle:"",moduleParamId:0,moduleParamLibelle:""},this.deleteprofilDialog=!1,this.deleteprofilsDialog=!1,this.selectedProfils=[],this.selectedMenus=[],this.tes=!0,this.op=!1,this.op2=!1,this.aeroports=[]}ngOnInit(){this.loadItems(),this.loadItemsProfil(),this.cols=[{field:"login",header:"Login"},{field:"email",header:"Email"},{field:"nom",header:"Nom"}],this.menuList$=this.store.pipe((0,c.Ys)(z)),this.store.dispatch(j.r$()),this.menuList$.pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.menuActions=t)}),this.aeroportList$=this.store.pipe((0,c.Ys)(X.B)),this.store.dispatch(W.gM()),this.aeroportList$.pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.aeroports=[...t],console.log("=== A\xe9roports assign\xe9s ===",this.aeroports))}),this.store.pipe((0,c.Ys)(K.i),(0,h.R)(this.destroy$)).subscribe(t=>{t&&t.message&&this.showToast(t.status,t.message)}),this.profilList$=this.store.pipe((0,c.Ys)(R)),this.store.dispatch(_.Rv()),this.profilList$.pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.profils=t)}),this.userList$=this.store.pipe((0,c.Ys)(H.Lh)),this.store.dispatch(m.II()),this.userList$.pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.loading=!1,this.users=t)})}findDroitMenu(){this.op2=!this.op2}findUserMenu(){this.op=!this.op}openNewProfil(){this.creeMenu=!0,this.profil={}}addUser(){this.user={},this.display=!0}annulerProfile(){this.profil={},this.addNewProfil=!1,this.selectedMenus=[]}newProfil(){this.profil={},this.addNewProfil=!0}deleteSelectedProfils(){this.deleteprofilsDialog=!0}showDetailsDialog(t){this.detailProfil={...t},console.log("================",t),this.isProfil=!0,t.menus&&(this.menuActionsDetail=t.menus)}fermerProfil(){this.isProfil=!1,this.detailProfil={}}editProfil(t){this.profil={...t},this.addNewProfil=!0,t.menus&&(this.selectedMenus=t.menus),this.profilDialog=!0}deleteProfil(t){this.deleteprofilDialog=!0,this.profil={...t}}confirmProfilDeleteSelected(){this.deleteprofilsDialog=!1,this.store.dispatch(_.gE({ProfilList:this.selectedProfils})),this.selectedProfils=[]}confirmProfilDelete(){this.deleteprofilDialog=!1,this.profil.id&&this.store.dispatch(_.gX(this.profil)),this.profil={}}saveProfil(){this.profil.code&&this.profil.libelle&&(this.profil.menus=this.selectedMenus,this.store.dispatch(this.profil.id?_.Y6(this.profil):_.UQ(this.profil)),this.profilDialog=!1,this.addNewProfil=!1,this.profil={},this.selectedMulti={},this.selectedMenus=[])}loadItemsProfil(){this.profilItems=[{label:"D\xe9tails",icon:"pi pi-eye",command:t=>{this.showDetailsDialog(this.selectedProfilItem)}},{label:"Modifier",icon:"pi pi-pencil",command:t=>{this.editProfil(this.selectedProfilItem)}},{label:"Supprimer",icon:"pi pi-times",command:t=>{this.deleteProfil(this.selectedProfilItem)}}]}loadItems(){this.items=[{label:"D\xe9tails",icon:"pi pi-eye",command:t=>{console.log("Current user:",this.selectedItem),this.findUser()}},{label:"Activer",icon:"pi pi-check",command:t=>{this.activeDesactiveUser(this.selectedItem)}}],this.itemsNoActif=[{label:"D\xe9tails",icon:"pi pi-eye",command:t=>{console.log("Current user:",this.selectedItem),this.findUser()}},{label:"Modifier",icon:"pi pi-pencil",command:t=>{console.log("Current user:",this.selectedItem),this.editUser(this.selectedItem)}},{label:"D\xe9sactiver",icon:"pi pi-check",command:t=>{this.activeDesactiveUser(this.selectedItem)}},{label:"R\xe9init. mot de passe",icon:"pi pi-lock",command:t=>{console.log("Current user:",this.selectedItem),this.showDialog(this.selectedItem)}}]}findActionByProfil(){this.displayMenu=!0}showDialog(t){this.visible=!0,t.email&&(this.emailUser=t.email)}renitialise(){this.accountService.reinitialize(this.emailUser,this.newPassword).subscribe(t=>{}),this.emailUser="",this.newPassword="",this.visible=!1}fermer(){this.userD=!1,this.detailUser={}}addProfil(){this.displayProfil=!0}fermerGestionProfil(){this.displayProfil=!1}findUser(){this.detailUser=this.selectedItem,this.detailUser.profil&&this.detailUser.profil?.id&&this.profilService.find(this.detailUser.profil?.id).subscribe(t=>{this.menus=t.body&&t.body.menus?t.body.menus:[]}),this.userD=!0}openNew(){this.user={},this.submitted=!1,this.userDialog=!0}deleteSelectedUsers(){this.deleteusersDialog=!0}editUser(t){console.log("agenceeeeeeeeee",t),this.selectedProfil=this.profils.find(n=>n.id===t.profil?.id),this.user={...t},console.log("agenceeeeeeeeee",this.user),t.profil&&(this.user.profil=this.profils.find(n=>n.id===t.profil?.id)),this.display=!0}deleteUser(t){this.deleteuserDialog=!0,this.user={...t}}confirmDeleteSelected(){this.deleteusersDialog=!1,this.store.dispatch(m.Gc({users:this.selectedusers})),this.selectedusers=[]}activeDesactiveUser(t){this.store.dispatch(m.h7(t))}confirmDelete(){this.deleteuserDialog=!1,this.user.id&&this.store.dispatch(m.h8(this.user)),this.user={}}hideDialog(){this.userDialog=!1,this.submitted=!1}filter1(t){console.log("====================",t)}saveUser(){this.submitted=!0,this.store.dispatch(this.user.id?m.Nq(this.user):m.r4(this.user)),this.userDialog=!1,this.user={},this.selectedMulti={}}onGlobalFilter(t,n){t.filterGlobal(n.target.value,"contains")}annuler(){this.user={},this.display=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}showToast(t,n){switch(this.messageService.clear(),t){case b.sB.success:this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:n,life:3e3});break;case b.sB.error:this.messageService.add({severity:"error",summary:"Erreur",detail:n,life:5e3});break;case b.sB.warning:this.messageService.add({severity:"warn",summary:"Attention",detail:n,life:4e3})}}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(g.ez),e.Y36(g.YP),e.Y36(c.yh),e.Y36(ee),e.Y36(te.B),e.Y36(ie))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user"]],standalone:!0,features:[e._Bn([g.ez,g.YP]),e.jDz],decls:142,vars:135,consts:[[1,"grid"],[1,"col-12","md:col-12"],["styleClass"," p-datatable-gridlines p-datatable-sm p-datatable","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","paginator","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["position","top",3,"visible","modal","responsive","header","visibleChange"],[1,"p-fluid","grid","mt-2"],[1,"col-6"],[1,"w-full"],[1,"required",2,"color","red !important","size","1.4em"],["name","profil","filterBy","libelle","placeholder","Selectionnez profil","optionLabel","libelle","appendTo","body","display","chip",1,"multiselect-custom",3,"options","ngModel","showClear","ngModelOptions","filter","ngModelChange"],["name","aeroport","filterBy","nomAeroport","placeholder","Selectionnez a\xe9roport","optionLabel","nomAeroport","appendTo","body","display","chip",1,"multiselect-custom",3,"options","ngModel","showClear","ngModelOptions","filter","ngModelChange"],["type","text","pInputText","","id","nom","required","","autofocus","",2,"width","100%",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["type","text","pInputText","","id","prenom","required","","autofocus","",2,"width","100%",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["type","email","pInputText","","id","email","minlength","5","maxlength","254","required","","autofocus","",2,"width","100%",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["pTemplate","footer"],["position","top","header","R\xe9unitialiser le mot de passe",3,"modal","visible","visibleChange"],[1,"flex","align-items-center","gap-3","mb-5"],["for","newPassword",1,"font-semibold","w-6rem"],[1,"col-10"],["name","newPassword","minlength","8","styleClass","w-full","placeholder","nouveau mot de passe","id","newPassword",1,"ng-invalid","ng-dirty",3,"ngModel","toggleMask","inputStyle","ngModelChange"],["password","ngModel"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-save","label","Enregistrer",1,"p-button-success","ml-2",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","Annuler",1,"p-button-danger",3,"click"],["position","top-center"],["header","Confirmation",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["position","top",3,"visible","header","modal","visibleChange"],[1,"field","col-12","md:col-3"],[1,"font-bold"],[3,"ngClass"],[2,"margin-bottom","3px","border-bottom","2px solid red"],["type","button","pButton","","label","Liste des droits de l'utilisateur",1,"p-button-success",3,"click"],["header","Gestion des profils ","position","top",3,"visible","modal","visibleChange"],["styleClass","p-datatable-gridlines p-datatable-sm p-datatable","dataKey","id","sortMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","loading","filterDelay"],["dtProfile",""],[1,"field","col-12","md:col-6"],["type","button","pButton","","label","Liste des droits",1,"p-button-success",3,"click"],["header","Nouveau profil","position","top",3,"visible","modal","visibleChange"],[1,"col-12","md:col-6"],["for","libelle",1,"w-full"],["type","text","pInputText","","placeholder","code","id","code","required","","autofocus","",2,"width","100%",3,"ngModel","ngModelOptions","ngModelChange"],["type","text","pInputText","","id","libelle","placeholder","libelle","required","","autofocus","",2,"width","100%",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["styleClass","p-datatable-gridlines p-datatable-sm p-datatable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Nouvel utilisateur","icon","pi pi-plus",1,"p-button-success","mr-2","mb-2",3,"click"],["pButton","","label","Gestion des profils","icon","pi pi-cog",1,"p-button-info","mb-2",3,"click"],[1,"p-button-outlined","mb-2"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher",1,"w-full",3,"input"],["filter",""],[2,"font-weight","bold"],["type","text","display","menu","field","profil.libelle"],["type","text","display","menu","field","login"],["type","text","display","menu","field","nom"],["type","text","display","menu","field","prenom"],[3,"pSelectableRow"],[1,"table-separator"],[1,"table-separator",3,"ngClass"],[1,"text-right"],["appendTo","body","label","Action","text","","styleClass","p-button-primary","severity","danger",3,"model","click",4,"ngIf"],["appendTo","body","label","Action","text","","styleClass","p-button-primary","severity","danger",3,"model","click"],["colspan","8",2,"text-align","center","font-size","1.2em","color","red","font-weight","bold"],[1,"text-danger"],["pButton","","pRipple","","icon","pi pi-check","label","Valider",1,"p-button-warning",3,"click"],["styleClass","p-datatable-responsive-demo p-datatable-gridlines p-datatable-sm p-datatable","dataKey","id","sortMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","loading","filterDelay"],["pSortableColumn","menuActionCode",2,"font-weight","bold"],["field","menuActionCode"],["type","text","display","menu","field","menuActionCode"],["pSortableColumn","menuActionLibelle",2,"font-weight","bold"],["field","menuActionLibelle"],["type","text","display","menu","field","menuActionLibelle"],["pButton","","pRipple","","icon","pi pi-ban","label","Fermer",1,"p-button-danger",3,"click"],["pButton","","label","Nouveau profil","icon","pi pi-plus",1,"p-button-success","mb-2",3,"click"],["type","text","field","code","display","menu",3,"matchMode"],["type","text","field","libelle","display","menu",3,"matchMode"],["styleClass","p-datatable-gridlines","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],[2,"width","3rem"],["type","text","display","menu","field","moduleParamLibelle"],[3,"value"],[2,"width","25%","min-width","10rem"],[2,"width","35%","min-width","10rem"],[2,"width","40%","min-width","10rem"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),e.NdJ("selectionChange",function(l){return i.selectedusers=l}),e.YNc(4,oe,9,0,"ng-template",4)(5,le,17,0,"ng-template",5)(6,re,14,12,"ng-template",6)(7,ae,4,0,"ng-template",7),e.qZA()(),e.TgZ(8,"p-dialog",8),e.NdJ("visibleChange",function(l){return i.display=l}),e.TgZ(9,"form")(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Profil "),e.TgZ(14,"span",12),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"p-dropdown",13),e.NdJ("ngModelChange",function(l){return i.user.profil=l}),e.qZA()(),e.TgZ(17,"div",10)(18,"label",11),e._uU(19,"Aeroport "),e._UZ(20,"span",12),e.qZA(),e.TgZ(21,"p-dropdown",14),e.NdJ("ngModelChange",function(l){return i.user.aeroport=l}),e.qZA()(),e.TgZ(22,"div",10)(23,"label",11),e._uU(24,"Nom "),e.TgZ(25,"span",12),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"input",15),e.NdJ("ngModelChange",function(l){return i.user.nom=l}),e.qZA()(),e.TgZ(28,"div",10)(29,"label",11),e._uU(30,"Prenom "),e.TgZ(31,"span",12),e._uU(32,"*"),e.qZA()(),e.TgZ(33,"input",16),e.NdJ("ngModelChange",function(l){return i.user.prenom=l}),e.qZA()(),e.TgZ(34,"div",10)(35,"label",11),e._uU(36,"Email "),e.TgZ(37,"span",12),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"input",17),e.NdJ("ngModelChange",function(l){return i.user.email=l}),e.qZA()()()(),e.YNc(40,pe,2,1,"ng-template",18),e.qZA(),e.TgZ(41,"p-dialog",19),e.NdJ("visibleChange",function(l){return i.visible=l}),e._UZ(42,"br"),e.TgZ(43,"div")(44,"div",20)(45,"label",21),e._uU(46,"Nouveau mot de passe"),e.qZA(),e.TgZ(47,"div",22)(48,"p-password",23,24),e.NdJ("ngModelChange",function(l){return i.newPassword=l}),e.qZA()()(),e.TgZ(50,"div",25)(51,"button",26),e.NdJ("click",function(){return i.renitialise()}),e.qZA(),e.TgZ(52,"button",27),e.NdJ("click",function(){return i.visible=!1}),e.qZA()()()(),e._UZ(53,"p-toast",28),e.TgZ(54,"p-dialog",29),e.NdJ("visibleChange",function(l){return i.deleteuserDialog=l}),e.TgZ(55,"div",30),e._UZ(56,"i",31),e.YNc(57,de,5,1,"span",32),e.qZA(),e.YNc(58,ue,2,0,"ng-template",18),e.qZA(),e.TgZ(59,"p-dialog",33),e.NdJ("visibleChange",function(l){return i.userD=l}),e.TgZ(60,"div",9)(61,"div",34)(62,"span",35),e._uU(63,"Profile: "),e.qZA(),e._uU(64),e.qZA(),e.TgZ(65,"div",34)(66,"span",35),e._uU(67,"Nom: "),e.qZA(),e._uU(68),e.qZA(),e.TgZ(69,"div",34)(70,"span",35),e._uU(71,"Pr\xe9nom: "),e.qZA(),e._uU(72),e.qZA(),e.TgZ(73,"div",34)(74,"span",35),e._uU(75,"Email: "),e.qZA(),e._uU(76),e.qZA(),e.TgZ(77,"div",34)(78,"span",35),e._uU(79,"Login: "),e.qZA(),e._uU(80),e.qZA(),e.TgZ(81,"div",34)(82,"span",35),e._uU(83,"Statut: "),e.qZA(),e.TgZ(84,"span",36),e._uU(85),e.qZA()()(),e.TgZ(86,"div",37)(87,"button",38),e.NdJ("click",function(){return i.findUserMenu()}),e.qZA()(),e.YNc(88,he,6,7,"div",32)(89,_e,1,0,"ng-template",18),e.qZA(),e.TgZ(90,"p-dialog",39),e.NdJ("visibleChange",function(l){return i.displayProfil=l}),e.TgZ(91,"p-table",40,41),e.YNc(93,fe,6,0,"ng-template",4)(94,be,9,2,"ng-template",5)(95,Ze,7,4,"ng-template",6)(96,ve,4,0,"ng-template",7),e.qZA(),e.YNc(97,Ue,1,0,"ng-template",18),e.qZA(),e.TgZ(98,"p-dialog",33),e.NdJ("visibleChange",function(l){return i.isProfil=l}),e.TgZ(99,"div",9)(100,"div",42)(101,"span",35),e._uU(102,"Code: "),e.qZA(),e._uU(103),e.qZA(),e.TgZ(104,"div",42)(105,"span",35),e._uU(106,"Libelle: "),e.qZA(),e._uU(107),e.qZA()(),e.TgZ(108,"div",37)(109,"button",43),e.NdJ("click",function(){return i.findDroitMenu()}),e.qZA()(),e.YNc(110,Ae,5,11,"div",32)(111,Me,1,0,"ng-template",18),e.qZA(),e.TgZ(112,"p-dialog",44),e.NdJ("visibleChange",function(l){return i.addNewProfil=l}),e.TgZ(113,"div",9)(114,"div",45)(115,"label",46),e._uU(116,"Code "),e.TgZ(117,"span",12),e._uU(118,"*"),e.qZA()(),e.TgZ(119,"input",47),e.NdJ("ngModelChange",function(l){return i.profil.code=l}),e.qZA()(),e.TgZ(120,"div",45)(121,"label",46),e._uU(122,"Libelle "),e.TgZ(123,"span",12),e._uU(124,"*"),e.qZA()(),e.TgZ(125,"input",48),e.NdJ("ngModelChange",function(l){return i.profil.libelle=l}),e.qZA()()(),e.TgZ(126,"div",37)(127,"h4"),e._uU(128,"S\xe9lectionnez les droits"),e.qZA()(),e.TgZ(129,"p-table",49,3),e.NdJ("selectionChange",function(l){return i.selectedMenus=l}),e.YNc(131,xe,6,0,"ng-template",4)(132,we,12,0,"ng-template",5)(133,ye,9,4,"ng-template",6),e.qZA(),e._UZ(134,"br"),e.YNc(135,Pe,2,1,"ng-template",18),e.qZA(),e.TgZ(136,"p-dialog",29),e.NdJ("visibleChange",function(l){return i.deleteprofilDialog=l}),e.TgZ(137,"div",30),e._UZ(138,"i",31),e.YNc(139,qe,5,1,"span",32),e.qZA(),e.YNc(140,De,2,0,"ng-template",18),e.qZA()(),e._UZ(141,"app-loading-spinner")),2&n){const s=e.MAs(49);e.xp6(2),e.Q6J("value",i.users)("columns",i.cols)("rows",5)("paginator",!0)("rowsPerPageOptions",e.DdM(108,Z))("showCurrentPageReport",!0)("globalFilterFields",e.DdM(109,Je))("selection",i.selectedusers)("rowHover",!0),e.xp6(6),e.Akn(e.DdM(110,Ne)),e.MGl("header","Nouvel utilisateur (",i.user.login,")"),e.Q6J("visible",i.display)("modal",!0)("responsive",!0)("modal",!0),e.xp6(8),e.Akn(e.DdM(111,$)),e.Q6J("options",i.profils)("ngModel",i.user.profil)("showClear",!0)("ngModelOptions",e.DdM(112,u))("filter",!0),e.xp6(5),e.Akn(e.DdM(113,$)),e.Q6J("options",i.aeroports)("ngModel",i.user.aeroport)("showClear",!0)("ngModelOptions",e.DdM(114,u))("filter",!0),e.xp6(6),e.Q6J("disabled",!i.user.profil)("ngModel",i.user.nom)("ngModelOptions",e.DdM(115,u)),e.xp6(6),e.Q6J("disabled",!i.user.nom)("ngModel",i.user.prenom)("ngModelOptions",e.DdM(116,u)),e.xp6(6),e.Q6J("disabled",!i.user.prenom)("ngModel",i.user.email)("ngModelOptions",e.DdM(117,u)),e.xp6(2),e.Akn(e.DdM(118,Fe)),e.Q6J("modal",!0)("visible",i.visible),e.xp6(7),e.Q6J("ngModel",i.newPassword)("toggleMask",!0)("inputStyle",e.DdM(119,$e)),e.xp6(3),e.Q6J("disabled",!i.newPassword||s.invalid),e.xp6(2),e.Akn(e.DdM(120,Ie)),e.xp6(1),e.Akn(e.DdM(121,I)),e.Q6J("visible",i.deleteuserDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",i.user),e.xp6(2),e.Akn(e.DdM(122,ke)),e.MGl("header","D\xe9tail de l'utilisateur ",i.detailUser.login,""),e.Q6J("visible",i.userD)("modal",!0),e.xp6(5),e.hij(" ",null==i.detailUser.profil?null:i.detailUser.profil.libelle," "),e.xp6(4),e.hij(" ",i.detailUser.nom," "),e.xp6(4),e.hij(" ",i.detailUser.prenom," "),e.xp6(4),e.hij("",i.detailUser.email," "),e.xp6(4),e.hij("",i.detailUser.login," "),e.xp6(4),e.Q6J("ngClass",e.WLB(123,J,i.detailUser.activated,!i.detailUser.activated)),e.xp6(1),e.Oqu(i.detailUser.activated?"ACTIF":"INACTIF"),e.xp6(3),e.Q6J("ngIf",i.op),e.xp6(2),e.Akn(e.DdM(126,v)),e.Q6J("visible",i.displayProfil)("modal",!0),e.xp6(1),e.Q6J("value",i.profils)("rows",4)("globalFilterFields",e.DdM(127,N))("paginator",!0)("loading",i.loading)("filterDelay",0),e.xp6(7),e.Akn(e.DdM(128,v)),e.MGl("header","D\xe9tail du profile ",i.detailProfil.libelle,""),e.Q6J("visible",i.isProfil)("modal",!0),e.xp6(5),e.hij(" ",i.detailProfil.code," "),e.xp6(4),e.hij(" ",i.detailProfil.libelle," "),e.xp6(3),e.Q6J("ngIf",i.op2),e.xp6(2),e.Akn(e.DdM(129,v)),e.Q6J("visible",i.addNewProfil)("modal",!0),e.xp6(7),e.Q6J("ngModel",i.profil.code)("ngModelOptions",e.DdM(130,u)),e.xp6(6),e.Q6J("disabled",!i.profil.code)("ngModel",i.profil.libelle)("ngModelOptions",e.DdM(131,u)),e.xp6(4),e.Q6J("value",i.menuActions)("columns",i.cols)("rows",5)("globalFilterFields",e.DdM(132,F))("paginator",!0)("rowsPerPageOptions",e.DdM(133,Z))("showCurrentPageReport",!0)("selection",i.selectedMenus)("rowHover",!0),e.xp6(7),e.Akn(e.DdM(134,I)),e.Q6J("visible",i.deleteprofilDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",i.user)}},dependencies:[f.ez,f.mk,f.O5,V.g,d.U$,d.iA,g.jx,d.lQ,d.Ei,d.fz,d.UA,d.Mo,d.xl,L.O,T.Hq,p.u5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.wO,p.nD,p.On,p.F,T.hJ,C.T,C.H,A.EV,A.FN,Q.V,S.Xt,M.j,M.o,G.A,x.kW,x.Lt,O.cc,B.L$,w.S,w.V,E.q4,y.l,y.a,P.gz,P.ro,Y.y],styles:[".activated[_ngcontent-%COMP%]{color:green}.not-activated[_ngcontent-%COMP%]{color:red}th.col1[_ngcontent-%COMP%], td.col1[_ngcontent-%COMP%]{width:200px}"]})}return o})()}}]);